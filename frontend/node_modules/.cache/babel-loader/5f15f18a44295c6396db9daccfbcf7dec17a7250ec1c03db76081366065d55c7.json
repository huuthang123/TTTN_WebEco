{"ast":null,"code":"// src/services/CartService.js\nimport axios from 'axios';\nconst BASE_URL = 'http://localhost:5000/api/carts';\nexport async function fetchCart(token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const response = await axios.get(BASE_URL, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    console.error('Error fetching cart:', error.message);\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error;\n  }\n}\nexport async function addToCart(product, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const {\n      productId,\n      quantity = 1,\n      size,\n      name,\n      price,\n      image\n    } = product;\n    console.log('Adding to cart:', {\n      productId,\n      quantity,\n      size,\n      name,\n      price,\n      image\n    });\n    const response = await axios.post(BASE_URL, {\n      productId,\n      quantity,\n      size,\n      name,\n      price,\n      image\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response3, _error$response3$data;\n    console.error('Error adding to cart:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n    throw new Error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Lỗi khi thêm vào giỏ hàng');\n  }\n}\nexport async function increaseQuantity(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    console.log('Increasing quantity:', {\n      productId,\n      size\n    });\n    const response = await axios.put(`${BASE_URL}/increase/${productId}/${size}`, {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response4, _error$response5, _error$response5$data;\n    console.error('Error increasing quantity:', ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error.message);\n    throw new Error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'Lỗi khi tăng số lượng');\n  }\n}\nexport async function decreaseQuantity(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    console.log('Decreasing quantity:', {\n      productId,\n      size\n    });\n    const response = await axios.put(`${BASE_URL}/decrease/${productId}/${size}`, {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response6, _error$response7, _error$response7$data;\n    console.error('Error decreasing quantity:', ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.data) || error.message);\n    throw new Error(((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.message) || 'Lỗi khi giảm số lượng');\n  }\n}\nexport async function removeFromCart(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    console.log('Removing from cart:', {\n      productId,\n      size\n    });\n    const response = await axios.delete(`${BASE_URL}/remove/${productId}/${size}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response8, _error$response9, _error$response9$data;\n    console.error('Error removing from cart:', ((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.data) || error.message);\n    throw new Error(((_error$response9 = error.response) === null || _error$response9 === void 0 ? void 0 : (_error$response9$data = _error$response9.data) === null || _error$response9$data === void 0 ? void 0 : _error$response9$data.message) || 'Lỗi khi xóa khỏi giỏ hàng');\n  }\n}","map":{"version":3,"names":["axios","BASE_URL","fetchCart","token","Error","response","get","headers","Authorization","data","error","_error$response","console","message","addToCart","product","productId","quantity","size","name","price","image","log","post","_error$response2","_error$response3","_error$response3$data","increaseQuantity","put","_error$response4","_error$response5","_error$response5$data","decreaseQuantity","_error$response6","_error$response7","_error$response7$data","removeFromCart","delete","_error$response8","_error$response9","_error$response9$data"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/services/CartService.js"],"sourcesContent":["// src/services/CartService.js\r\nimport axios from 'axios';\r\n\r\nconst BASE_URL = 'http://localhost:5000/api/carts';\r\n\r\nexport async function fetchCart(token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const response = await axios.get(BASE_URL, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function addToCart(product, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const { productId, quantity = 1, size, name, price, image } = product;\r\n    console.log('Adding to cart:', { productId, quantity, size, name, price, image });\r\n\r\n    const response = await axios.post(\r\n      BASE_URL,\r\n      { productId, quantity, size, name, price, image },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error adding to cart:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi thêm vào giỏ hàng');\r\n  }\r\n}\r\n\r\nexport async function increaseQuantity(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    console.log('Increasing quantity:', { productId, size });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/increase/${productId}/${size}`,\r\n      {},\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error increasing quantity:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi tăng số lượng');\r\n  }\r\n}\r\n\r\nexport async function decreaseQuantity(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    console.log('Decreasing quantity:', { productId, size });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/decrease/${productId}/${size}`,\r\n      {},\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error decreasing quantity:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi giảm số lượng');\r\n  }\r\n}\r\n\r\nexport async function removeFromCart(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    console.log('Removing from cart:', { productId, size });\r\n\r\n    const response = await axios.delete(`${BASE_URL}/remove/${productId}/${size}`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error removing from cart:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi xóa khỏi giỏ hàng');\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}