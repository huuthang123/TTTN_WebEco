{"ast":null,"code":"// src/services/CartService.js\nimport axios from 'axios';\nconst BASE_URL = 'http://localhost:5000/api/carts';\nconst mapSize = size => {\n  switch (size) {\n    case \"25\":\n      return \"0.25\";\n    case \"5\":\n      return \"0.5\";\n    case \"1\":\n      return \"1\";\n    case \"0.25\":\n      return \"0.25\";\n    case \"0.5\":\n      return \"0.5\";\n    case \"1.0\":\n      return \"1\";\n    default:\n      throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ \"25\" (0.25kg), \"5\" (0.5kg), \"1\" (1kg)`);\n  }\n};\nexport async function fetchCart(token) {\n  // Không cần userId vì backend lấy từ token\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const response = await axios.get(BASE_URL, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    console.error('Error fetching cart:', error.message);\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error;\n  }\n}\nexport async function addToCart(product, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const {\n      productId,\n      quantity = 1,\n      size,\n      name,\n      price,\n      image\n    } = product;\n    const mappedSize = mapSize(size);\n    console.log('Adding to cart:', {\n      productId,\n      quantity,\n      size: mappedSize,\n      name,\n      price,\n      image\n    });\n    const response = await axios.post(BASE_URL, {\n      productId,\n      quantity,\n      size: mappedSize,\n      name,\n      price,\n      image\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    console.error('Error adding to cart:', error.message);\n    throw ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error;\n  }\n}\nexport async function increaseQuantity(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Increasing quantity:', {\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.put(`${BASE_URL}/increase/${productId}/${mappedSize}`, {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    console.error('Error increasing quantity:', error.message);\n    throw ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error;\n  }\n}\nexport async function decreaseQuantity(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Decreasing quantity:', {\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.put(`${BASE_URL}/decrease/${productId}/${mappedSize}`, {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response4;\n    console.error('Error decreasing quantity:', error.message);\n    throw ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error;\n  }\n}\nexport async function removeFromCart(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Removing from cart:', {\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.delete(`${BASE_URL}/remove/${productId}/${mappedSize}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response5;\n    console.error('Error removing from cart:', error.message);\n    throw ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data) || error;\n  }\n}","map":{"version":3,"names":["axios","BASE_URL","mapSize","size","Error","fetchCart","token","response","get","headers","Authorization","data","error","_error$response","console","message","addToCart","product","productId","quantity","name","price","image","mappedSize","log","post","_error$response2","increaseQuantity","put","_error$response3","decreaseQuantity","_error$response4","removeFromCart","delete","_error$response5"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/services/CartService.js"],"sourcesContent":["// src/services/CartService.js\r\nimport axios from 'axios';\r\n\r\nconst BASE_URL = 'http://localhost:5000/api/carts';\r\n\r\nconst mapSize = (size) => {\r\n  switch (size) {\r\n    case \"25\": return \"0.25\";\r\n    case \"5\": return \"0.5\";\r\n    case \"1\": return \"1\";\r\n    case \"0.25\": return \"0.25\";\r\n    case \"0.5\": return \"0.5\";\r\n    case \"1.0\": return \"1\";\r\n    default: throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ \"25\" (0.25kg), \"5\" (0.5kg), \"1\" (1kg)`);\r\n  }\r\n};\r\n\r\nexport async function fetchCart(token) { // Không cần userId vì backend lấy từ token\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const response = await axios.get(BASE_URL, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function addToCart(product, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const { productId, quantity = 1, size, name, price, image } = product;\r\n    const mappedSize = mapSize(size);\r\n    console.log('Adding to cart:', { productId, quantity, size: mappedSize, name, price, image });\r\n\r\n    const response = await axios.post(\r\n      BASE_URL,\r\n      { productId, quantity, size: mappedSize, name, price, image },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error adding to cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function increaseQuantity(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Increasing quantity:', { productId, size: mappedSize });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/increase/${productId}/${mappedSize}`,\r\n      {},\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error increasing quantity:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function decreaseQuantity(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Decreasing quantity:', { productId, size: mappedSize });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/decrease/${productId}/${mappedSize}`,\r\n      {},\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error decreasing quantity:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function removeFromCart(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Removing from cart:', { productId, size: mappedSize });\r\n\r\n    const response = await axios.delete(`${BASE_URL}/remove/${productId}/${mappedSize}`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error removing from cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}