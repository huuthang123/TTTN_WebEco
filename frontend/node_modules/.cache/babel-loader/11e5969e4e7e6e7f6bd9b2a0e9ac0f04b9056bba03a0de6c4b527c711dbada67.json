{"ast":null,"code":"import React,{useState}from'react';import\"../styles/ProductItem.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductItem=_ref=>{let{product,addToCart}=_ref;const[selectedWeight,setSelectedWeight]=useState('25');const[quantity,setQuantity]=useState(1);const getPriceFromSchema=weight=>{if(weight===\"1\"){var _product$prices;return(_product$prices=product.prices)===null||_product$prices===void 0?void 0:_product$prices[\"1\"];}else{var _product$prices2,_product$prices2$;return(_product$prices2=product.prices)===null||_product$prices2===void 0?void 0:(_product$prices2$=_product$prices2[\"0\"])===null||_product$prices2$===void 0?void 0:_product$prices2$[weight];}};const handleAddToCart=()=>{const price=getPriceFromSchema(selectedWeight);if(price===undefined){console.error(\"Lỗi: Không tìm thấy giá sản phẩm\",product);return;}const size=selectedWeight===\"25\"?\"0.25\":selectedWeight===\"5\"?\"0.5\":\"1\";addToCart({productId:product._id,name:product.name,price:price,image:product.image,size:size,quantity});};const currentPrice=getPriceFromSchema(selectedWeight);const originalPrice=currentPrice/(1-0.17);// Giảm 17%\nconst discountPercentage=17;return/*#__PURE__*/_jsxs(\"div\",{className:\"product-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,className:\"product-image\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",children:product.description}),/*#__PURE__*/_jsx(\"div\",{className:\"product-meta\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"product-rating\",children:[\"\\u2B50 \",product.rating,\" (\",product.sold,\" l\\u01B0\\u1EE3t b\\xE1n)\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[originalPrice&&/*#__PURE__*/_jsxs(\"span\",{className:\"original-price\",children:[Math.round(originalPrice).toLocaleString(),\" VND\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"current-price\",children:[currentPrice?`${currentPrice.toLocaleString()} VND`:\"Giá chưa cập nhật\",\"/ \",selectedWeight===\"25\"?\"0.25kg\":selectedWeight===\"5\"?\"0.5kg\":\"1kg\"]}),discountPercentage&&/*#__PURE__*/_jsxs(\"span\",{className:\"discount\",children:[\"-\",discountPercentage,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-options\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Ch\\u1ECDn tr\\u1ECDng l\\u01B0\\u1EE3ng: \"}),/*#__PURE__*/_jsx(\"div\",{className:\"weight-options\",children:[\"25\",\"5\",\"1\"].map(weight=>/*#__PURE__*/_jsx(\"button\",{className:`weight-option ${selectedWeight===weight?'selected':''}`,onClick:()=>setSelectedWeight(weight),children:weight===\"25\"?\"0.25kg\":weight===\"5\"?\"0.5kg\":\"1kg\"},weight))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-quantity\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"S\\u1ED1 l\\u01B0\\u1EE3ng: \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.max(1,quantity-1)),children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:quantity,readOnly:true}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(quantity+1),children:\"+\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"btn-add\",children:\"Th\\xEAm v\\xE0o gi\\u1ECF h\\xE0ng\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-buy\",children:\"Mua ngay\"})]})]})]});};export default ProductItem;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ProductItem","_ref","product","addToCart","selectedWeight","setSelectedWeight","quantity","setQuantity","getPriceFromSchema","weight","_product$prices","prices","_product$prices2","_product$prices2$","handleAddToCart","price","undefined","console","error","size","productId","_id","name","image","currentPrice","originalPrice","discountPercentage","className","children","src","alt","description","rating","sold","Math","round","toLocaleString","map","onClick","max","type","value","readOnly"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/components/ProductItem.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport \"../styles/ProductItem.css\";\r\n\r\nconst ProductItem = ({ product, addToCart }) => {\r\n    const [selectedWeight, setSelectedWeight] = useState('25');\r\n    const [quantity, setQuantity] = useState(1);\r\n\r\n    const getPriceFromSchema = (weight) => {\r\n        if (weight === \"1\") {\r\n            return product.prices?.[\"1\"];\r\n        } else {\r\n            return product.prices?.[\"0\"]?.[weight];\r\n        }\r\n    };\r\n\r\n    const handleAddToCart = () => {\r\n        const price = getPriceFromSchema(selectedWeight);\r\n        if (price === undefined) {\r\n            console.error(\"Lỗi: Không tìm thấy giá sản phẩm\", product);\r\n            return;\r\n        }\r\n\r\n        const size = selectedWeight === \"25\" ? \"0.25\" : selectedWeight === \"5\" ? \"0.5\" : \"1\";\r\n\r\n        addToCart({ \r\n            productId: product._id,\r\n            name: product.name, \r\n            price: price, \r\n            image: product.image,\r\n            size: size,\r\n            quantity\r\n        });\r\n    };\r\n\r\n    const currentPrice = getPriceFromSchema(selectedWeight);\r\n    const originalPrice = currentPrice / (1 - 0.17); // Giảm 17%\r\n    const discountPercentage = 17;\r\n\r\n    return (\r\n        <div className=\"product-item\">\r\n            <div className=\"product-image-container\">\r\n                <img src={product.image} alt={product.name} className=\"product-image\" />\r\n            </div>\r\n            <div className=\"product-info\">\r\n                <h2 className=\"product-name\">{product.name}</h2>\r\n                <p className=\"product-description\">{product.description}</p>\r\n                <div className=\"product-meta\">\r\n                    <span className=\"product-rating\">⭐ {product.rating} ({product.sold} lượt bán)</span>\r\n                </div>\r\n                <div className=\"product-price\">\r\n                    {originalPrice && (\r\n                        <span className=\"original-price\">{Math.round(originalPrice).toLocaleString()} VND</span>\r\n                    )}\r\n                    <span className=\"current-price\">\r\n                        {currentPrice \r\n                            ? `${currentPrice.toLocaleString()} VND`\r\n                            : \"Giá chưa cập nhật\"} \r\n                        / {selectedWeight === \"25\" ? \"0.25kg\" : selectedWeight === \"5\" ? \"0.5kg\" : \"1kg\"}\r\n                    </span>\r\n                    {discountPercentage && (\r\n                        <span className=\"discount\">-{discountPercentage}%</span>\r\n                    )}\r\n                </div>\r\n                <div className=\"product-options\">\r\n                    <label>Chọn trọng lượng: </label>\r\n                    <div className=\"weight-options\">\r\n                        {[\"25\", \"5\", \"1\"].map(weight => (\r\n                            <button\r\n                                key={weight}\r\n                                className={`weight-option ${selectedWeight === weight ? 'selected' : ''}`}\r\n                                onClick={() => setSelectedWeight(weight)}\r\n                            >\r\n                                {weight === \"25\" ? \"0.25kg\" : weight === \"5\" ? \"0.5kg\" : \"1kg\"}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                <div className=\"product-quantity\">\r\n                    <label>Số lượng: </label>\r\n                    <div className=\"quantity-controls\">\r\n                        <button onClick={() => setQuantity(Math.max(1, quantity - 1))}>-</button>\r\n                        <input \r\n                            type=\"text\" \r\n                            value={quantity} \r\n                            readOnly \r\n                        />\r\n                        <button onClick={() => setQuantity(quantity + 1)}>+</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"product-actions\">\r\n                    <button onClick={handleAddToCart} className=\"btn-add\">Thêm vào giỏ hàng</button>\r\n                    <button className=\"btn-buy\">Mua ngay</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductItem;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}