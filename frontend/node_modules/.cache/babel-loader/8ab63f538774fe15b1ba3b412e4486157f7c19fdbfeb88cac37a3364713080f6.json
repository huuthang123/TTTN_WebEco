{"ast":null,"code":"// src/services/CartService.js\nimport axios from 'axios';\nconst BASE_URL = 'http://localhost:5000/api/carts';\n\n// Ánh xạ size từ giao diện sang database\nconst mapSize = size => {\n  switch (size) {\n    case \"0.25\":\n      return \"25\";\n    case \"0.5\":\n      return \"5\";\n    case \"1\":\n      return \"1\";\n    default:\n      throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ \"0.25\", \"0.5\", \"1\"`);\n  }\n};\nexport async function fetchCart(token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const response = await axios.get(BASE_URL, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    console.error('Error fetching cart:', error.message);\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error;\n  }\n}\nexport async function addToCart(product, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const {\n      productId,\n      quantity = 1,\n      size,\n      name,\n      price,\n      image\n    } = product;\n    const mappedSize = mapSize(size); // Ánh xạ size\n    console.log('Adding to cart:', {\n      productId,\n      quantity,\n      size: mappedSize,\n      name,\n      price,\n      image\n    });\n    const response = await axios.post(BASE_URL, {\n      productId,\n      quantity,\n      size: mappedSize,\n      name,\n      price,\n      image\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response3, _error$response3$data;\n    console.error('Error adding to cart:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n    throw new Error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Lỗi khi thêm vào giỏ hàng');\n  }\n}\nexport async function increaseQuantity(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Increasing quantity:', {\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.put(`${BASE_URL}/increase/${productId}/${mappedSize}`, {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response4, _error$response5, _error$response5$data;\n    console.error('Error increasing quantity:', ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error.message);\n    throw new Error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'Lỗi khi tăng số lượng');\n  }\n}\nexport async function decreaseQuantity(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Decreasing quantity:', {\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.put(`${BASE_URL}/decrease/${productId}/${mappedSize}`, {}, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response6, _error$response7, _error$response7$data;\n    console.error('Error decreasing quantity:', ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.data) || error.message);\n    throw new Error(((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.message) || 'Lỗi khi giảm số lượng');\n  }\n}\nexport async function removeFromCart(productId, size, token) {\n  try {\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Removing from cart:', {\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.delete(`${BASE_URL}/remove/${productId}/${mappedSize}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response8, _error$response9, _error$response9$data;\n    console.error('Error removing from cart:', ((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : _error$response8.data) || error.message);\n    throw new Error(((_error$response9 = error.response) === null || _error$response9 === void 0 ? void 0 : (_error$response9$data = _error$response9.data) === null || _error$response9$data === void 0 ? void 0 : _error$response9$data.message) || 'Lỗi khi xóa khỏi giỏ hàng');\n  }\n}","map":{"version":3,"names":["axios","BASE_URL","mapSize","size","Error","fetchCart","token","response","get","headers","Authorization","data","error","_error$response","console","message","addToCart","product","productId","quantity","name","price","image","mappedSize","log","post","_error$response2","_error$response3","_error$response3$data","increaseQuantity","put","_error$response4","_error$response5","_error$response5$data","decreaseQuantity","_error$response6","_error$response7","_error$response7$data","removeFromCart","delete","_error$response8","_error$response9","_error$response9$data"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/services/CartService.js"],"sourcesContent":["// src/services/CartService.js\r\nimport axios from 'axios';\r\n\r\nconst BASE_URL = 'http://localhost:5000/api/carts';\r\n\r\n// Ánh xạ size từ giao diện sang database\r\nconst mapSize = (size) => {\r\n  switch (size) {\r\n    case \"0.25\": return \"25\";\r\n    case \"0.5\": return \"5\";\r\n    case \"1\": return \"1\";\r\n    default: throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ \"0.25\", \"0.5\", \"1\"`);\r\n  }\r\n};\r\n\r\nexport async function fetchCart(token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const response = await axios.get(BASE_URL, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function addToCart(product, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const { productId, quantity = 1, size, name, price, image } = product;\r\n    const mappedSize = mapSize(size); // Ánh xạ size\r\n    console.log('Adding to cart:', { productId, quantity, size: mappedSize, name, price, image });\r\n\r\n    const response = await axios.post(\r\n      BASE_URL,\r\n      { productId, quantity, size: mappedSize, name, price, image },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error adding to cart:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi thêm vào giỏ hàng');\r\n  }\r\n}\r\n\r\nexport async function increaseQuantity(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Increasing quantity:', { productId, size: mappedSize });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/increase/${productId}/${mappedSize}`,\r\n      {},\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error increasing quantity:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi tăng số lượng');\r\n  }\r\n}\r\n\r\nexport async function decreaseQuantity(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Decreasing quantity:', { productId, size: mappedSize });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/decrease/${productId}/${mappedSize}`,\r\n      {},\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error decreasing quantity:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi giảm số lượng');\r\n  }\r\n}\r\n\r\nexport async function removeFromCart(productId, size, token) {\r\n  try {\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Removing from cart:', { productId, size: mappedSize });\r\n\r\n    const response = await axios.delete(`${BASE_URL}/remove/${productId}/${mappedSize}`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error removing from cart:', error.response?.data || error.message);\r\n    throw new Error(error.response?.data?.message || 'Lỗi khi xóa khỏi giỏ hàng');\r\n  }\r\n}"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,iCAAiC;;AAElD;AACA,MAAMC,OAAO,GAAIC,IAAI,IAAK;EACxB,QAAQA,IAAI;IACV,KAAK,MAAM;MAAE,OAAO,IAAI;IACxB,KAAK,KAAK;MAAE,OAAO,GAAG;IACtB,KAAK,GAAG;MAAE,OAAO,GAAG;IACpB;MAAS,MAAM,IAAIC,KAAK,CAAC,sBAAsBD,IAAI,iCAAiC,CAAC;EACvF;AACF,CAAC;AAED,OAAO,eAAeE,SAASA,CAACC,KAAK,EAAE;EACrC,IAAI;IACF,IAAI,CAACA,KAAK,EAAE,MAAM,IAAIF,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAMG,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAACP,QAAQ,EAAE;MACzCQ,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUJ,KAAK;MAAG;IAC9C,CAAC,CAAC;IACF,OAAOC,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAC,eAAA;IACdC,OAAO,CAACF,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAACG,OAAO,CAAC;IACpD,MAAM,EAAAF,eAAA,GAAAD,KAAK,CAACL,QAAQ,cAAAM,eAAA,uBAAdA,eAAA,CAAgBF,IAAI,KAAIC,KAAK;EACrC;AACF;AAEA,OAAO,eAAeI,SAASA,CAACC,OAAO,EAAEX,KAAK,EAAE;EAC9C,IAAI;IACF,IAAI,CAACA,KAAK,EAAE,MAAM,IAAIF,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAM;MAAEc,SAAS;MAAEC,QAAQ,GAAG,CAAC;MAAEhB,IAAI;MAAEiB,IAAI;MAAEC,KAAK;MAAEC;IAAM,CAAC,GAAGL,OAAO;IACrE,MAAMM,UAAU,GAAGrB,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;IAClCW,OAAO,CAACU,GAAG,CAAC,iBAAiB,EAAE;MAAEN,SAAS;MAAEC,QAAQ;MAAEhB,IAAI,EAAEoB,UAAU;MAAEH,IAAI;MAAEC,KAAK;MAAEC;IAAM,CAAC,CAAC;IAE7F,MAAMf,QAAQ,GAAG,MAAMP,KAAK,CAACyB,IAAI,CAC/BxB,QAAQ,EACR;MAAEiB,SAAS;MAAEC,QAAQ;MAAEhB,IAAI,EAAEoB,UAAU;MAAEH,IAAI;MAAEC,KAAK;MAAEC;IAAM,CAAC,EAC7D;MAAEb,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUJ,KAAK;MAAG;IAAE,CAClD,CAAC;IACD,OAAOC,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAc,gBAAA,EAAAC,gBAAA,EAAAC,qBAAA;IACdd,OAAO,CAACF,KAAK,CAAC,uBAAuB,EAAE,EAAAc,gBAAA,GAAAd,KAAK,CAACL,QAAQ,cAAAmB,gBAAA,uBAAdA,gBAAA,CAAgBf,IAAI,KAAIC,KAAK,CAACG,OAAO,CAAC;IAC7E,MAAM,IAAIX,KAAK,CAAC,EAAAuB,gBAAA,GAAAf,KAAK,CAACL,QAAQ,cAAAoB,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBhB,IAAI,cAAAiB,qBAAA,uBAApBA,qBAAA,CAAsBb,OAAO,KAAI,2BAA2B,CAAC;EAC/E;AACF;AAEA,OAAO,eAAec,gBAAgBA,CAACX,SAAS,EAAEf,IAAI,EAAEG,KAAK,EAAE;EAC7D,IAAI;IACF,IAAI,CAACA,KAAK,EAAE,MAAM,IAAIF,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAMmB,UAAU,GAAGrB,OAAO,CAACC,IAAI,CAAC;IAChCW,OAAO,CAACU,GAAG,CAAC,sBAAsB,EAAE;MAAEN,SAAS;MAAEf,IAAI,EAAEoB;IAAW,CAAC,CAAC;IAEpE,MAAMhB,QAAQ,GAAG,MAAMP,KAAK,CAAC8B,GAAG,CAC9B,GAAG7B,QAAQ,aAAaiB,SAAS,IAAIK,UAAU,EAAE,EACjD,CAAC,CAAC,EACF;MAAEd,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUJ,KAAK;MAAG;IAAE,CAClD,CAAC;IACD,OAAOC,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAmB,gBAAA,EAAAC,gBAAA,EAAAC,qBAAA;IACdnB,OAAO,CAACF,KAAK,CAAC,4BAA4B,EAAE,EAAAmB,gBAAA,GAAAnB,KAAK,CAACL,QAAQ,cAAAwB,gBAAA,uBAAdA,gBAAA,CAAgBpB,IAAI,KAAIC,KAAK,CAACG,OAAO,CAAC;IAClF,MAAM,IAAIX,KAAK,CAAC,EAAA4B,gBAAA,GAAApB,KAAK,CAACL,QAAQ,cAAAyB,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBrB,IAAI,cAAAsB,qBAAA,uBAApBA,qBAAA,CAAsBlB,OAAO,KAAI,uBAAuB,CAAC;EAC3E;AACF;AAEA,OAAO,eAAemB,gBAAgBA,CAAChB,SAAS,EAAEf,IAAI,EAAEG,KAAK,EAAE;EAC7D,IAAI;IACF,IAAI,CAACA,KAAK,EAAE,MAAM,IAAIF,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAMmB,UAAU,GAAGrB,OAAO,CAACC,IAAI,CAAC;IAChCW,OAAO,CAACU,GAAG,CAAC,sBAAsB,EAAE;MAAEN,SAAS;MAAEf,IAAI,EAAEoB;IAAW,CAAC,CAAC;IAEpE,MAAMhB,QAAQ,GAAG,MAAMP,KAAK,CAAC8B,GAAG,CAC9B,GAAG7B,QAAQ,aAAaiB,SAAS,IAAIK,UAAU,EAAE,EACjD,CAAC,CAAC,EACF;MAAEd,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUJ,KAAK;MAAG;IAAE,CAClD,CAAC;IACD,OAAOC,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAuB,gBAAA,EAAAC,gBAAA,EAAAC,qBAAA;IACdvB,OAAO,CAACF,KAAK,CAAC,4BAA4B,EAAE,EAAAuB,gBAAA,GAAAvB,KAAK,CAACL,QAAQ,cAAA4B,gBAAA,uBAAdA,gBAAA,CAAgBxB,IAAI,KAAIC,KAAK,CAACG,OAAO,CAAC;IAClF,MAAM,IAAIX,KAAK,CAAC,EAAAgC,gBAAA,GAAAxB,KAAK,CAACL,QAAQ,cAAA6B,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBzB,IAAI,cAAA0B,qBAAA,uBAApBA,qBAAA,CAAsBtB,OAAO,KAAI,uBAAuB,CAAC;EAC3E;AACF;AAEA,OAAO,eAAeuB,cAAcA,CAACpB,SAAS,EAAEf,IAAI,EAAEG,KAAK,EAAE;EAC3D,IAAI;IACF,IAAI,CAACA,KAAK,EAAE,MAAM,IAAIF,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAMmB,UAAU,GAAGrB,OAAO,CAACC,IAAI,CAAC;IAChCW,OAAO,CAACU,GAAG,CAAC,qBAAqB,EAAE;MAAEN,SAAS;MAAEf,IAAI,EAAEoB;IAAW,CAAC,CAAC;IAEnE,MAAMhB,QAAQ,GAAG,MAAMP,KAAK,CAACuC,MAAM,CAAC,GAAGtC,QAAQ,WAAWiB,SAAS,IAAIK,UAAU,EAAE,EAAE;MACnFd,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUJ,KAAK;MAAG;IAC9C,CAAC,CAAC;IACF,OAAOC,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAA4B,gBAAA,EAAAC,gBAAA,EAAAC,qBAAA;IACd5B,OAAO,CAACF,KAAK,CAAC,2BAA2B,EAAE,EAAA4B,gBAAA,GAAA5B,KAAK,CAACL,QAAQ,cAAAiC,gBAAA,uBAAdA,gBAAA,CAAgB7B,IAAI,KAAIC,KAAK,CAACG,OAAO,CAAC;IACjF,MAAM,IAAIX,KAAK,CAAC,EAAAqC,gBAAA,GAAA7B,KAAK,CAACL,QAAQ,cAAAkC,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgB9B,IAAI,cAAA+B,qBAAA,uBAApBA,qBAAA,CAAsB3B,OAAO,KAAI,2BAA2B,CAAC;EAC/E;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}