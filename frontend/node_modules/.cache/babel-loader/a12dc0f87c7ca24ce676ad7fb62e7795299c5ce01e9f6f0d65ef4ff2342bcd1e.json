{"ast":null,"code":"// components/ShippingAddressForm.jsx\nimport React,{useState,useEffect}from'react';import axios from'axios';import AddressService from'../services/AddressService';import{useAuth}from'../context/AuthContext';import'../styles/ShippingAddressForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ShippingAddressForm(_ref){let{onAddressSelect,onClose}=_ref;const{user,logout}=useAuth();const[formData,setFormData]=useState({province:'',district:'',ward:'',detail:'',fullName:'',phone:''});const[errors,setErrors]=useState({});const[provinces,setProvinces]=useState([]);const[districts,setDistricts]=useState([]);const[wards,setWards]=useState([]);// Hàm kiểm tra dữ liệu (validation)\nconst validateForm=data=>{const newErrors={};if(!data.fullName.trim()){newErrors.fullName='Họ và tên không được để trống.';}const phoneRegex=/^[0-9]{10}$/;if(!data.phone.trim()){newErrors.phone='Số điện thoại không được để trống.';}else if(!phoneRegex.test(data.phone.trim())){newErrors.phone='Số điện thoại không hợp lệ (phải là 10 chữ số).';}if(!data.province){newErrors.province='Vui lòng chọn tỉnh/thành phố.';}if(!data.district){newErrors.district='Vui lòng chọn quận/huyện.';}if(!data.ward){newErrors.ward='Vui lòng chọn phường/xã.';}if(!data.detail.trim()){newErrors.detail='Địa chỉ chi tiết không được để trống.';}return newErrors;};// Lấy danh sách tỉnh/thành phố từ API\nuseEffect(()=>{const fetchProvinces=async()=>{try{const response=await axios.get('https://provinces.open-api.vn/api/p/');setProvinces(response.data);}catch(error){console.error('Lỗi khi lấy danh sách tỉnh:',error);setErrors({form:'Lỗi khi tải danh sách tỉnh/thành phố.'});}};fetchProvinces();},[]);// Lấy danh sách quận/huyện khi tỉnh thay đổi\nuseEffect(()=>{if(formData.province){const fetchDistricts=async()=>{try{const response=await axios.get(`https://provinces.open-api.vn/api/p/${formData.province}?depth=2`);setDistricts(response.data.districts||[]);setFormData(prev=>({...prev,district:'',ward:''}));setWards([]);setErrors(prev=>validateForm({...formData,district:'',ward:''}));}catch(error){console.error('Lỗi khi lấy danh sách quận/huyện:',error);setErrors({form:'Lỗi khi tải danh sách quận/huyện.'});}};fetchDistricts();}else{setDistricts([]);setWards([]);}},[formData.province]);// Lấy danh sách phường/xã khi quận/huyện thay đổi\nuseEffect(()=>{if(formData.district){const fetchWards=async()=>{try{const response=await axios.get(`https://provinces.open-api.vn/api/d/${formData.district}?depth=2`);setWards(response.data.wards||[]);setFormData(prev=>({...prev,ward:''}));setErrors(prev=>validateForm({...formData,ward:''}));}catch(error){console.error('Lỗi khi lấy danh sách phường/xã:',error);setErrors({form:'Lỗi khi tải danh sách phường/xã.'});}};fetchWards();}else{setWards([]);}},[formData.district]);// Xử lý thay đổi input và validation realtime\nconst handleInputChange=(field,value)=>{const updatedFormData={...formData,[field]:value};setFormData(updatedFormData);const newErrors=validateForm(updatedFormData);setErrors(newErrors);};const handleSubmit=async e=>{var _provinces$find,_districts$find,_wards$find;e.preventDefault();const validationErrors=validateForm(formData);if(Object.keys(validationErrors).length>0){setErrors(validationErrors);return;}const provinceName=((_provinces$find=provinces.find(p=>p.code===parseInt(formData.province)))===null||_provinces$find===void 0?void 0:_provinces$find.name)||'';const districtName=((_districts$find=districts.find(d=>d.code===parseInt(formData.district)))===null||_districts$find===void 0?void 0:_districts$find.name)||'';const wardName=((_wards$find=wards.find(w=>w.code===parseInt(formData.ward)))===null||_wards$find===void 0?void 0:_wards$find.name)||'';const addressData={fullName:formData.fullName,phone:formData.phone,province:provinceName,district:districtName,ward:wardName,detail:formData.detail};try{const newAddress=await AddressService.addAddress(addressData);onAddressSelect({fullName:newAddress.fullName,address:`${newAddress.detail}, ${newAddress.ward}, ${newAddress.district}, ${newAddress.province}`,phone:newAddress.phone});setFormData({province:'',district:'',ward:'',detail:'',fullName:'',phone:''});setErrors({});onClose();// Đóng modal sau khi thêm địa chỉ\n}catch(error){console.error('Lỗi khi lưu địa chỉ:',error);if(error.response&&error.response.status===401){setErrors({form:'Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.'});logout();}else{var _error$response,_error$response$data;setErrors({form:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Lỗi khi lưu địa chỉ.'});}}};if(!user||!user._id){return/*#__PURE__*/_jsx(\"div\",{className:\"shipping-address-container\",children:/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:\"Vui l\\xF2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 qu\\u1EA3n l\\xFD \\u0111\\u1ECBa ch\\u1EC9.\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"shipping-address-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"address-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"H\\u1ECD v\\xE0 t\\xEAn:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.fullName,onChange:e=>handleInputChange('fullName',e.target.value),className:errors.fullName?'input-error':''}),errors.fullName&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.fullName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.phone,onChange:e=>handleInputChange('phone',e.target.value),className:errors.phone?'input-error':''}),errors.phone&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"T\\u1EC9nh/Th\\xE0nh ph\\u1ED1:\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.province,onChange:e=>handleInputChange('province',e.target.value),className:errors.province?'input-error':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Ch\\u1ECDn T\\u1EC9nh/Th\\xE0nh ph\\u1ED1\"}),provinces.map(province=>/*#__PURE__*/_jsx(\"option\",{value:province.code,children:province.name},province.code))]}),errors.province&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.province})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Qu\\u1EADn/Huy\\u1EC7n:\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.district,onChange:e=>handleInputChange('district',e.target.value),className:errors.district?'input-error':'',disabled:!formData.province,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Ch\\u1ECDn Qu\\u1EADn/Huy\\u1EC7n\"}),districts.map(district=>/*#__PURE__*/_jsx(\"option\",{value:district.code,children:district.name},district.code))]}),errors.district&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.district})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Ph\\u01B0\\u1EDDng/X\\xE3:\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.ward,onChange:e=>handleInputChange('ward',e.target.value),className:errors.ward?'input-error':'',disabled:!formData.district,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Ch\\u1ECDn Ph\\u01B0\\u1EDDng/X\\xE3\"}),wards.map(ward=>/*#__PURE__*/_jsx(\"option\",{value:ward.code,children:ward.name},ward.code))]}),errors.ward&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.ward})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0110\\u1ECBa ch\\u1EC9 chi ti\\u1EBFt:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.detail,onChange:e=>handleInputChange('detail',e.target.value),className:errors.detail?'input-error':''}),errors.detail&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.detail})]}),errors.form&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.form}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"Th\\xEAm \\u0111\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"cancel-btn\",children:\"H\\u1EE7y\"})]})]})});}export default ShippingAddressForm;","map":{"version":3,"names":["React","useState","useEffect","axios","AddressService","useAuth","jsx","_jsx","jsxs","_jsxs","ShippingAddressForm","_ref","onAddressSelect","onClose","user","logout","formData","setFormData","province","district","ward","detail","fullName","phone","errors","setErrors","provinces","setProvinces","districts","setDistricts","wards","setWards","validateForm","data","newErrors","trim","phoneRegex","test","fetchProvinces","response","get","error","console","form","fetchDistricts","prev","fetchWards","handleInputChange","field","value","updatedFormData","handleSubmit","e","_provinces$find","_districts$find","_wards$find","preventDefault","validationErrors","Object","keys","length","provinceName","find","p","code","parseInt","name","districtName","d","wardName","w","addressData","newAddress","addAddress","address","status","_error$response","_error$response$data","message","_id","className","children","onSubmit","type","onChange","target","map","disabled","onClick"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/components/ShippingAddressForm.jsx"],"sourcesContent":["// components/ShippingAddressForm.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport AddressService from '../services/AddressService';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport '../styles/ShippingAddressForm.css';\r\n\r\nfunction ShippingAddressForm({ onAddressSelect, onClose }) {\r\n    const { user, logout } = useAuth();\r\n    const [formData, setFormData] = useState({\r\n        province: '',\r\n        district: '',\r\n        ward: '',\r\n        detail: '',\r\n        fullName: '',\r\n        phone: ''\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n    const [provinces, setProvinces] = useState([]);\r\n    const [districts, setDistricts] = useState([]);\r\n    const [wards, setWards] = useState([]);\r\n\r\n    // Hàm kiểm tra dữ liệu (validation)\r\n    const validateForm = (data) => {\r\n        const newErrors = {};\r\n\r\n        if (!data.fullName.trim()) {\r\n            newErrors.fullName = 'Họ và tên không được để trống.';\r\n        }\r\n\r\n        const phoneRegex = /^[0-9]{10}$/;\r\n        if (!data.phone.trim()) {\r\n            newErrors.phone = 'Số điện thoại không được để trống.';\r\n        } else if (!phoneRegex.test(data.phone.trim())) {\r\n            newErrors.phone = 'Số điện thoại không hợp lệ (phải là 10 chữ số).';\r\n        }\r\n\r\n        if (!data.province) {\r\n            newErrors.province = 'Vui lòng chọn tỉnh/thành phố.';\r\n        }\r\n\r\n        if (!data.district) {\r\n            newErrors.district = 'Vui lòng chọn quận/huyện.';\r\n        }\r\n\r\n        if (!data.ward) {\r\n            newErrors.ward = 'Vui lòng chọn phường/xã.';\r\n        }\r\n\r\n        if (!data.detail.trim()) {\r\n            newErrors.detail = 'Địa chỉ chi tiết không được để trống.';\r\n        }\r\n\r\n        return newErrors;\r\n    };\r\n\r\n    // Lấy danh sách tỉnh/thành phố từ API\r\n    useEffect(() => {\r\n        const fetchProvinces = async () => {\r\n            try {\r\n                const response = await axios.get('https://provinces.open-api.vn/api/p/');\r\n                setProvinces(response.data);\r\n            } catch (error) {\r\n                console.error('Lỗi khi lấy danh sách tỉnh:', error);\r\n                setErrors({ form: 'Lỗi khi tải danh sách tỉnh/thành phố.' });\r\n            }\r\n        };\r\n        fetchProvinces();\r\n    }, []);\r\n\r\n    // Lấy danh sách quận/huyện khi tỉnh thay đổi\r\n    useEffect(() => {\r\n        if (formData.province) {\r\n            const fetchDistricts = async () => {\r\n                try {\r\n                    const response = await axios.get(`https://provinces.open-api.vn/api/p/${formData.province}?depth=2`);\r\n                    setDistricts(response.data.districts || []);\r\n                    setFormData((prev) => ({ ...prev, district: '', ward: '' }));\r\n                    setWards([]);\r\n                    setErrors((prev) => validateForm({ ...formData, district: '', ward: '' }));\r\n                } catch (error) {\r\n                    console.error('Lỗi khi lấy danh sách quận/huyện:', error);\r\n                    setErrors({ form: 'Lỗi khi tải danh sách quận/huyện.' });\r\n                }\r\n            };\r\n            fetchDistricts();\r\n        } else {\r\n            setDistricts([]);\r\n            setWards([]);\r\n        }\r\n    }, [formData.province]);\r\n\r\n    // Lấy danh sách phường/xã khi quận/huyện thay đổi\r\n    useEffect(() => {\r\n        if (formData.district) {\r\n            const fetchWards = async () => {\r\n                try {\r\n                    const response = await axios.get(`https://provinces.open-api.vn/api/d/${formData.district}?depth=2`);\r\n                    setWards(response.data.wards || []);\r\n                    setFormData((prev) => ({ ...prev, ward: '' }));\r\n                    setErrors((prev) => validateForm({ ...formData, ward: '' }));\r\n                } catch (error) {\r\n                    console.error('Lỗi khi lấy danh sách phường/xã:', error);\r\n                    setErrors({ form: 'Lỗi khi tải danh sách phường/xã.' });\r\n                }\r\n            };\r\n            fetchWards();\r\n        } else {\r\n            setWards([]);\r\n        }\r\n    }, [formData.district]);\r\n\r\n    // Xử lý thay đổi input và validation realtime\r\n    const handleInputChange = (field, value) => {\r\n        const updatedFormData = { ...formData, [field]: value };\r\n        setFormData(updatedFormData);\r\n        const newErrors = validateForm(updatedFormData);\r\n        setErrors(newErrors);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const validationErrors = validateForm(formData);\r\n        if (Object.keys(validationErrors).length > 0) {\r\n            setErrors(validationErrors);\r\n            return;\r\n        }\r\n\r\n        const provinceName = provinces.find(p => p.code === parseInt(formData.province))?.name || '';\r\n        const districtName = districts.find(d => d.code === parseInt(formData.district))?.name || '';\r\n        const wardName = wards.find(w => w.code === parseInt(formData.ward))?.name || '';\r\n        const addressData = {\r\n            fullName: formData.fullName,\r\n            phone: formData.phone,\r\n            province: provinceName,\r\n            district: districtName,\r\n            ward: wardName,\r\n            detail: formData.detail\r\n        };\r\n\r\n        try {\r\n            const newAddress = await AddressService.addAddress(addressData);\r\n            onAddressSelect({\r\n                fullName: newAddress.fullName,\r\n                address: `${newAddress.detail}, ${newAddress.ward}, ${newAddress.district}, ${newAddress.province}`,\r\n                phone: newAddress.phone\r\n            });\r\n            setFormData({\r\n                province: '',\r\n                district: '',\r\n                ward: '',\r\n                detail: '',\r\n                fullName: '',\r\n                phone: ''\r\n            });\r\n            setErrors({});\r\n            onClose(); // Đóng modal sau khi thêm địa chỉ\r\n        } catch (error) {\r\n            console.error('Lỗi khi lưu địa chỉ:', error);\r\n            if (error.response && error.response.status === 401) {\r\n                setErrors({ form: 'Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.' });\r\n                logout();\r\n            } else {\r\n                setErrors({ form: error.response?.data?.message || 'Lỗi khi lưu địa chỉ.' });\r\n            }\r\n        }\r\n    };\r\n\r\n    if (!user || !user._id) {\r\n        return (\r\n            <div className=\"shipping-address-container\">\r\n                <p className=\"form-error\">Vui lòng đăng nhập để quản lý địa chỉ.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"shipping-address-container\">\r\n            <form onSubmit={handleSubmit} className=\"address-form\">\r\n                <div className=\"form-group\">\r\n                    <label>Họ và tên:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={formData.fullName}\r\n                        onChange={(e) => handleInputChange('fullName', e.target.value)}\r\n                        className={errors.fullName ? 'input-error' : ''}\r\n                    />\r\n                    {errors.fullName && <p className=\"error-message\">{errors.fullName}</p>}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Số điện thoại:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={formData.phone}\r\n                        onChange={(e) => handleInputChange('phone', e.target.value)}\r\n                        className={errors.phone ? 'input-error' : ''}\r\n                    />\r\n                    {errors.phone && <p className=\"error-message\">{errors.phone}</p>}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Tỉnh/Thành phố:</label>\r\n                    <select\r\n                        value={formData.province}\r\n                        onChange={(e) => handleInputChange('province', e.target.value)}\r\n                        className={errors.province ? 'input-error' : ''}\r\n                    >\r\n                        <option value=\"\">Chọn Tỉnh/Thành phố</option>\r\n                        {provinces.map((province) => (\r\n                            <option key={province.code} value={province.code}>\r\n                                {province.name}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                    {errors.province && <p className=\"error-message\">{errors.province}</p>}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Quận/Huyện:</label>\r\n                    <select\r\n                        value={formData.district}\r\n                        onChange={(e) => handleInputChange('district', e.target.value)}\r\n                        className={errors.district ? 'input-error' : ''}\r\n                        disabled={!formData.province}\r\n                    >\r\n                        <option value=\"\">Chọn Quận/Huyện</option>\r\n                        {districts.map((district) => (\r\n                            <option key={district.code} value={district.code}>\r\n                                {district.name}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                    {errors.district && <p className=\"error-message\">{errors.district}</p>}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Phường/Xã:</label>\r\n                    <select\r\n                        value={formData.ward}\r\n                        onChange={(e) => handleInputChange('ward', e.target.value)}\r\n                        className={errors.ward ? 'input-error' : ''}\r\n                        disabled={!formData.district}\r\n                    >\r\n                        <option value=\"\">Chọn Phường/Xã</option>\r\n                        {wards.map((ward) => (\r\n                            <option key={ward.code} value={ward.code}>\r\n                                {ward.name}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                    {errors.ward && <p className=\"error-message\">{errors.ward}</p>}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label>Địa chỉ chi tiết:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={formData.detail}\r\n                        onChange={(e) => handleInputChange('detail', e.target.value)}\r\n                        className={errors.detail ? 'input-error' : ''}\r\n                    />\r\n                    {errors.detail && <p className=\"error-message\">{errors.detail}</p>}\r\n                </div>\r\n\r\n                {errors.form && <p className=\"form-error\">{errors.form}</p>}\r\n                <div className=\"form-buttons\">\r\n                    <button type=\"submit\" className=\"submit-btn\">\r\n                        Thêm địa chỉ\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        className=\"cancel-btn\"\r\n                    >\r\n                        Hủy\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ShippingAddressForm;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,cAAc,KAAM,4BAA4B,CACvD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,MAAO,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,QAAS,CAAAC,mBAAmBA,CAAAC,IAAA,CAA+B,IAA9B,CAAEC,eAAe,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CACrD,KAAM,CAAEG,IAAI,CAAEC,MAAO,CAAC,CAAGV,OAAO,CAAC,CAAC,CAClC,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,CACrCiB,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,EAAE,CACVC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EACX,CAAC,CAAC,CACF,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGxB,QAAQ,CAAC,CAAC,CAAC,CAAC,CACxC,KAAM,CAACyB,SAAS,CAAEC,YAAY,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC2B,SAAS,CAAEC,YAAY,CAAC,CAAG5B,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC6B,KAAK,CAAEC,QAAQ,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CAEtC;AACA,KAAM,CAAA+B,YAAY,CAAIC,IAAI,EAAK,CAC3B,KAAM,CAAAC,SAAS,CAAG,CAAC,CAAC,CAEpB,GAAI,CAACD,IAAI,CAACX,QAAQ,CAACa,IAAI,CAAC,CAAC,CAAE,CACvBD,SAAS,CAACZ,QAAQ,CAAG,gCAAgC,CACzD,CAEA,KAAM,CAAAc,UAAU,CAAG,aAAa,CAChC,GAAI,CAACH,IAAI,CAACV,KAAK,CAACY,IAAI,CAAC,CAAC,CAAE,CACpBD,SAAS,CAACX,KAAK,CAAG,oCAAoC,CAC1D,CAAC,IAAM,IAAI,CAACa,UAAU,CAACC,IAAI,CAACJ,IAAI,CAACV,KAAK,CAACY,IAAI,CAAC,CAAC,CAAC,CAAE,CAC5CD,SAAS,CAACX,KAAK,CAAG,iDAAiD,CACvE,CAEA,GAAI,CAACU,IAAI,CAACf,QAAQ,CAAE,CAChBgB,SAAS,CAAChB,QAAQ,CAAG,+BAA+B,CACxD,CAEA,GAAI,CAACe,IAAI,CAACd,QAAQ,CAAE,CAChBe,SAAS,CAACf,QAAQ,CAAG,2BAA2B,CACpD,CAEA,GAAI,CAACc,IAAI,CAACb,IAAI,CAAE,CACZc,SAAS,CAACd,IAAI,CAAG,0BAA0B,CAC/C,CAEA,GAAI,CAACa,IAAI,CAACZ,MAAM,CAACc,IAAI,CAAC,CAAC,CAAE,CACrBD,SAAS,CAACb,MAAM,CAAG,uCAAuC,CAC9D,CAEA,MAAO,CAAAa,SAAS,CACpB,CAAC,CAED;AACAhC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAoC,cAAc,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApC,KAAK,CAACqC,GAAG,CAAC,sCAAsC,CAAC,CACxEb,YAAY,CAACY,QAAQ,CAACN,IAAI,CAAC,CAC/B,CAAE,MAAOQ,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDhB,SAAS,CAAC,CAAEkB,IAAI,CAAE,uCAAwC,CAAC,CAAC,CAChE,CACJ,CAAC,CACDL,cAAc,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN;AACApC,SAAS,CAAC,IAAM,CACZ,GAAIc,QAAQ,CAACE,QAAQ,CAAE,CACnB,KAAM,CAAA0B,cAAc,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACA,KAAM,CAAAL,QAAQ,CAAG,KAAM,CAAApC,KAAK,CAACqC,GAAG,CAAC,uCAAuCxB,QAAQ,CAACE,QAAQ,UAAU,CAAC,CACpGW,YAAY,CAACU,QAAQ,CAACN,IAAI,CAACL,SAAS,EAAI,EAAE,CAAC,CAC3CX,WAAW,CAAE4B,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAE1B,QAAQ,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAAC,CAAC,CAC5DW,QAAQ,CAAC,EAAE,CAAC,CACZN,SAAS,CAAEoB,IAAI,EAAKb,YAAY,CAAC,CAAE,GAAGhB,QAAQ,CAAEG,QAAQ,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAAC,CAAC,CAC9E,CAAE,MAAOqB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,mCAAmC,CAAEA,KAAK,CAAC,CACzDhB,SAAS,CAAC,CAAEkB,IAAI,CAAE,mCAAoC,CAAC,CAAC,CAC5D,CACJ,CAAC,CACDC,cAAc,CAAC,CAAC,CACpB,CAAC,IAAM,CACHf,YAAY,CAAC,EAAE,CAAC,CAChBE,QAAQ,CAAC,EAAE,CAAC,CAChB,CACJ,CAAC,CAAE,CAACf,QAAQ,CAACE,QAAQ,CAAC,CAAC,CAEvB;AACAhB,SAAS,CAAC,IAAM,CACZ,GAAIc,QAAQ,CAACG,QAAQ,CAAE,CACnB,KAAM,CAAA2B,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACA,KAAM,CAAAP,QAAQ,CAAG,KAAM,CAAApC,KAAK,CAACqC,GAAG,CAAC,uCAAuCxB,QAAQ,CAACG,QAAQ,UAAU,CAAC,CACpGY,QAAQ,CAACQ,QAAQ,CAACN,IAAI,CAACH,KAAK,EAAI,EAAE,CAAC,CACnCb,WAAW,CAAE4B,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAEzB,IAAI,CAAE,EAAG,CAAC,CAAC,CAAC,CAC9CK,SAAS,CAAEoB,IAAI,EAAKb,YAAY,CAAC,CAAE,GAAGhB,QAAQ,CAAEI,IAAI,CAAE,EAAG,CAAC,CAAC,CAAC,CAChE,CAAE,MAAOqB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CACxDhB,SAAS,CAAC,CAAEkB,IAAI,CAAE,kCAAmC,CAAC,CAAC,CAC3D,CACJ,CAAC,CACDG,UAAU,CAAC,CAAC,CAChB,CAAC,IAAM,CACHf,QAAQ,CAAC,EAAE,CAAC,CAChB,CACJ,CAAC,CAAE,CAACf,QAAQ,CAACG,QAAQ,CAAC,CAAC,CAEvB;AACA,KAAM,CAAA4B,iBAAiB,CAAGA,CAACC,KAAK,CAAEC,KAAK,GAAK,CACxC,KAAM,CAAAC,eAAe,CAAG,CAAE,GAAGlC,QAAQ,CAAE,CAACgC,KAAK,EAAGC,KAAM,CAAC,CACvDhC,WAAW,CAACiC,eAAe,CAAC,CAC5B,KAAM,CAAAhB,SAAS,CAAGF,YAAY,CAACkB,eAAe,CAAC,CAC/CzB,SAAS,CAACS,SAAS,CAAC,CACxB,CAAC,CAED,KAAM,CAAAiB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,KAAAC,eAAA,CAAAC,eAAA,CAAAC,WAAA,CAC9BH,CAAC,CAACI,cAAc,CAAC,CAAC,CAElB,KAAM,CAAAC,gBAAgB,CAAGzB,YAAY,CAAChB,QAAQ,CAAC,CAC/C,GAAI0C,MAAM,CAACC,IAAI,CAACF,gBAAgB,CAAC,CAACG,MAAM,CAAG,CAAC,CAAE,CAC1CnC,SAAS,CAACgC,gBAAgB,CAAC,CAC3B,OACJ,CAEA,KAAM,CAAAI,YAAY,CAAG,EAAAR,eAAA,CAAA3B,SAAS,CAACoC,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,IAAI,GAAKC,QAAQ,CAACjD,QAAQ,CAACE,QAAQ,CAAC,CAAC,UAAAmC,eAAA,iBAA3DA,eAAA,CAA6Da,IAAI,GAAI,EAAE,CAC5F,KAAM,CAAAC,YAAY,CAAG,EAAAb,eAAA,CAAA1B,SAAS,CAACkC,IAAI,CAACM,CAAC,EAAIA,CAAC,CAACJ,IAAI,GAAKC,QAAQ,CAACjD,QAAQ,CAACG,QAAQ,CAAC,CAAC,UAAAmC,eAAA,iBAA3DA,eAAA,CAA6DY,IAAI,GAAI,EAAE,CAC5F,KAAM,CAAAG,QAAQ,CAAG,EAAAd,WAAA,CAAAzB,KAAK,CAACgC,IAAI,CAACQ,CAAC,EAAIA,CAAC,CAACN,IAAI,GAAKC,QAAQ,CAACjD,QAAQ,CAACI,IAAI,CAAC,CAAC,UAAAmC,WAAA,iBAAnDA,WAAA,CAAqDW,IAAI,GAAI,EAAE,CAChF,KAAM,CAAAK,WAAW,CAAG,CAChBjD,QAAQ,CAAEN,QAAQ,CAACM,QAAQ,CAC3BC,KAAK,CAAEP,QAAQ,CAACO,KAAK,CACrBL,QAAQ,CAAE2C,YAAY,CACtB1C,QAAQ,CAAEgD,YAAY,CACtB/C,IAAI,CAAEiD,QAAQ,CACdhD,MAAM,CAAEL,QAAQ,CAACK,MACrB,CAAC,CAED,GAAI,CACA,KAAM,CAAAmD,UAAU,CAAG,KAAM,CAAApE,cAAc,CAACqE,UAAU,CAACF,WAAW,CAAC,CAC/D3D,eAAe,CAAC,CACZU,QAAQ,CAAEkD,UAAU,CAAClD,QAAQ,CAC7BoD,OAAO,CAAE,GAAGF,UAAU,CAACnD,MAAM,KAAKmD,UAAU,CAACpD,IAAI,KAAKoD,UAAU,CAACrD,QAAQ,KAAKqD,UAAU,CAACtD,QAAQ,EAAE,CACnGK,KAAK,CAAEiD,UAAU,CAACjD,KACtB,CAAC,CAAC,CACFN,WAAW,CAAC,CACRC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,EAAE,CACVC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EACX,CAAC,CAAC,CACFE,SAAS,CAAC,CAAC,CAAC,CAAC,CACbZ,OAAO,CAAC,CAAC,CAAE;AACf,CAAE,MAAO4B,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5C,GAAIA,KAAK,CAACF,QAAQ,EAAIE,KAAK,CAACF,QAAQ,CAACoC,MAAM,GAAK,GAAG,CAAE,CACjDlD,SAAS,CAAC,CAAEkB,IAAI,CAAE,qDAAsD,CAAC,CAAC,CAC1E5B,MAAM,CAAC,CAAC,CACZ,CAAC,IAAM,KAAA6D,eAAA,CAAAC,oBAAA,CACHpD,SAAS,CAAC,CAAEkB,IAAI,CAAE,EAAAiC,eAAA,CAAAnC,KAAK,CAACF,QAAQ,UAAAqC,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgB3C,IAAI,UAAA4C,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAI,sBAAuB,CAAC,CAAC,CAChF,CACJ,CACJ,CAAC,CAED,GAAI,CAAChE,IAAI,EAAI,CAACA,IAAI,CAACiE,GAAG,CAAE,CACpB,mBACIxE,IAAA,QAAKyE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACvC1E,IAAA,MAAGyE,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,2FAAsC,CAAG,CAAC,CACnE,CAAC,CAEd,CAEA,mBACI1E,IAAA,QAAKyE,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACvCxE,KAAA,SAAMyE,QAAQ,CAAE/B,YAAa,CAAC6B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAClDxE,KAAA,QAAKuE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB1E,IAAA,UAAA0E,QAAA,CAAO,uBAAU,CAAO,CAAC,cACzB1E,IAAA,UACI4E,IAAI,CAAC,MAAM,CACXlC,KAAK,CAAEjC,QAAQ,CAACM,QAAS,CACzB8D,QAAQ,CAAGhC,CAAC,EAAKL,iBAAiB,CAAC,UAAU,CAAEK,CAAC,CAACiC,MAAM,CAACpC,KAAK,CAAE,CAC/D+B,SAAS,CAAExD,MAAM,CAACF,QAAQ,CAAG,aAAa,CAAG,EAAG,CACnD,CAAC,CACDE,MAAM,CAACF,QAAQ,eAAIf,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzD,MAAM,CAACF,QAAQ,CAAI,CAAC,EACrE,CAAC,cAENb,KAAA,QAAKuE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB1E,IAAA,UAAA0E,QAAA,CAAO,oCAAc,CAAO,CAAC,cAC7B1E,IAAA,UACI4E,IAAI,CAAC,MAAM,CACXlC,KAAK,CAAEjC,QAAQ,CAACO,KAAM,CACtB6D,QAAQ,CAAGhC,CAAC,EAAKL,iBAAiB,CAAC,OAAO,CAAEK,CAAC,CAACiC,MAAM,CAACpC,KAAK,CAAE,CAC5D+B,SAAS,CAAExD,MAAM,CAACD,KAAK,CAAG,aAAa,CAAG,EAAG,CAChD,CAAC,CACDC,MAAM,CAACD,KAAK,eAAIhB,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzD,MAAM,CAACD,KAAK,CAAI,CAAC,EAC/D,CAAC,cAENd,KAAA,QAAKuE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB1E,IAAA,UAAA0E,QAAA,CAAO,8BAAe,CAAO,CAAC,cAC9BxE,KAAA,WACIwC,KAAK,CAAEjC,QAAQ,CAACE,QAAS,CACzBkE,QAAQ,CAAGhC,CAAC,EAAKL,iBAAiB,CAAC,UAAU,CAAEK,CAAC,CAACiC,MAAM,CAACpC,KAAK,CAAE,CAC/D+B,SAAS,CAAExD,MAAM,CAACN,QAAQ,CAAG,aAAa,CAAG,EAAG,CAAA+D,QAAA,eAEhD1E,IAAA,WAAQ0C,KAAK,CAAC,EAAE,CAAAgC,QAAA,CAAC,uCAAmB,CAAQ,CAAC,CAC5CvD,SAAS,CAAC4D,GAAG,CAAEpE,QAAQ,eACpBX,IAAA,WAA4B0C,KAAK,CAAE/B,QAAQ,CAAC8C,IAAK,CAAAiB,QAAA,CAC5C/D,QAAQ,CAACgD,IAAI,EADLhD,QAAQ,CAAC8C,IAEd,CACX,CAAC,EACE,CAAC,CACRxC,MAAM,CAACN,QAAQ,eAAIX,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzD,MAAM,CAACN,QAAQ,CAAI,CAAC,EACrE,CAAC,cAENT,KAAA,QAAKuE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB1E,IAAA,UAAA0E,QAAA,CAAO,uBAAW,CAAO,CAAC,cAC1BxE,KAAA,WACIwC,KAAK,CAAEjC,QAAQ,CAACG,QAAS,CACzBiE,QAAQ,CAAGhC,CAAC,EAAKL,iBAAiB,CAAC,UAAU,CAAEK,CAAC,CAACiC,MAAM,CAACpC,KAAK,CAAE,CAC/D+B,SAAS,CAAExD,MAAM,CAACL,QAAQ,CAAG,aAAa,CAAG,EAAG,CAChDoE,QAAQ,CAAE,CAACvE,QAAQ,CAACE,QAAS,CAAA+D,QAAA,eAE7B1E,IAAA,WAAQ0C,KAAK,CAAC,EAAE,CAAAgC,QAAA,CAAC,gCAAe,CAAQ,CAAC,CACxCrD,SAAS,CAAC0D,GAAG,CAAEnE,QAAQ,eACpBZ,IAAA,WAA4B0C,KAAK,CAAE9B,QAAQ,CAAC6C,IAAK,CAAAiB,QAAA,CAC5C9D,QAAQ,CAAC+C,IAAI,EADL/C,QAAQ,CAAC6C,IAEd,CACX,CAAC,EACE,CAAC,CACRxC,MAAM,CAACL,QAAQ,eAAIZ,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzD,MAAM,CAACL,QAAQ,CAAI,CAAC,EACrE,CAAC,cAENV,KAAA,QAAKuE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB1E,IAAA,UAAA0E,QAAA,CAAO,yBAAU,CAAO,CAAC,cACzBxE,KAAA,WACIwC,KAAK,CAAEjC,QAAQ,CAACI,IAAK,CACrBgE,QAAQ,CAAGhC,CAAC,EAAKL,iBAAiB,CAAC,MAAM,CAAEK,CAAC,CAACiC,MAAM,CAACpC,KAAK,CAAE,CAC3D+B,SAAS,CAAExD,MAAM,CAACJ,IAAI,CAAG,aAAa,CAAG,EAAG,CAC5CmE,QAAQ,CAAE,CAACvE,QAAQ,CAACG,QAAS,CAAA8D,QAAA,eAE7B1E,IAAA,WAAQ0C,KAAK,CAAC,EAAE,CAAAgC,QAAA,CAAC,kCAAc,CAAQ,CAAC,CACvCnD,KAAK,CAACwD,GAAG,CAAElE,IAAI,eACZb,IAAA,WAAwB0C,KAAK,CAAE7B,IAAI,CAAC4C,IAAK,CAAAiB,QAAA,CACpC7D,IAAI,CAAC8C,IAAI,EADD9C,IAAI,CAAC4C,IAEV,CACX,CAAC,EACE,CAAC,CACRxC,MAAM,CAACJ,IAAI,eAAIb,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzD,MAAM,CAACJ,IAAI,CAAI,CAAC,EAC7D,CAAC,cAENX,KAAA,QAAKuE,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvB1E,IAAA,UAAA0E,QAAA,CAAO,uCAAiB,CAAO,CAAC,cAChC1E,IAAA,UACI4E,IAAI,CAAC,MAAM,CACXlC,KAAK,CAAEjC,QAAQ,CAACK,MAAO,CACvB+D,QAAQ,CAAGhC,CAAC,EAAKL,iBAAiB,CAAC,QAAQ,CAAEK,CAAC,CAACiC,MAAM,CAACpC,KAAK,CAAE,CAC7D+B,SAAS,CAAExD,MAAM,CAACH,MAAM,CAAG,aAAa,CAAG,EAAG,CACjD,CAAC,CACDG,MAAM,CAACH,MAAM,eAAId,IAAA,MAAGyE,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEzD,MAAM,CAACH,MAAM,CAAI,CAAC,EACjE,CAAC,CAELG,MAAM,CAACmB,IAAI,eAAIpC,IAAA,MAAGyE,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAEzD,MAAM,CAACmB,IAAI,CAAI,CAAC,cAC3DlC,KAAA,QAAKuE,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzB1E,IAAA,WAAQ4E,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,gCAE7C,CAAQ,CAAC,cACT1E,IAAA,WACI4E,IAAI,CAAC,QAAQ,CACbK,OAAO,CAAE3E,OAAQ,CACjBmE,SAAS,CAAC,YAAY,CAAAC,QAAA,CACzB,UAED,CAAQ,CAAC,EACR,CAAC,EACJ,CAAC,CACN,CAAC,CAEd,CAEA,cAAe,CAAAvE,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}