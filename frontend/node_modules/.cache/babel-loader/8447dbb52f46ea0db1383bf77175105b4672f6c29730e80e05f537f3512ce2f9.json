{"ast":null,"code":"// src/services/CartService.js\nimport axios from 'axios';\nconst BASE_URL = 'http://localhost:5000/api/carts';\nconst mapSize = size => {\n  switch (size) {\n    case \"25\":\n      return \"0.25\";\n    case \"5\":\n      return \"0.5\";\n    case \"1\":\n      return \"1\";\n    case \"0.25\":\n      return \"0.25\";\n    case \"0.5\":\n      return \"0.5\";\n    case \"1.0\":\n      return \"1\";\n    default:\n      throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ \"25\" (0.25kg), \"5\" (0.5kg), \"1\" (1kg)`);\n  }\n};\nexport async function fetchCart(userId, token) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    if (!token) throw new Error('Thiếu token');\n    console.log('Fetching cart for userId:', userId);\n    const response = await axios.get(`${BASE_URL}/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    console.error('Error fetching cart:', error.message);\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error;\n  }\n}\nexport async function addToCart(userId, product, token) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    if (!token) throw new Error('Thiếu token');\n    const {\n      productId,\n      quantity = 1,\n      size,\n      name,\n      price,\n      image\n    } = product;\n    const mappedSize = mapSize(size);\n    console.log('Adding to cart:', {\n      userId,\n      productId,\n      quantity,\n      size: mappedSize,\n      name,\n      price,\n      image\n    });\n    const response = await axios.post(`${BASE_URL}/add`, {\n      userId,\n      productId,\n      quantity,\n      size: mappedSize,\n      name,\n      price,\n      image\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    console.error('Error adding to cart:', error.message);\n    throw ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error;\n  }\n}\nexport async function increaseQuantity(userId, productId, size, token) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Increasing quantity:', {\n      userId,\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.put(`${BASE_URL}/increase`, {\n      userId,\n      productId,\n      size: mappedSize\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    console.error('Error increasing quantity:', error.message);\n    throw ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error;\n  }\n}\nexport async function decreaseQuantity(userId, productId, size, token) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Decreasing quantity:', {\n      userId,\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.put(`${BASE_URL}/decrease`, {\n      userId,\n      productId,\n      size: mappedSize\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response4;\n    console.error('Error decreasing quantity:', error.message);\n    throw ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error;\n  }\n}\nexport async function removeFromCart(userId, productId, size, token) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    if (!token) throw new Error('Thiếu token');\n    const mappedSize = mapSize(size);\n    console.log('Removing from cart:', {\n      userId,\n      productId,\n      size: mappedSize\n    });\n    const response = await axios.delete(`${BASE_URL}/remove`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      data: {\n        userId,\n        productId,\n        size: mappedSize\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response5;\n    console.error('Error removing from cart:', error.message);\n    throw ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data) || error;\n  }\n}","map":{"version":3,"names":["axios","BASE_URL","mapSize","size","Error","fetchCart","userId","token","console","log","response","get","headers","Authorization","data","error","_error$response","message","addToCart","product","productId","quantity","name","price","image","mappedSize","post","_error$response2","increaseQuantity","put","_error$response3","decreaseQuantity","_error$response4","removeFromCart","delete","_error$response5"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/services/CartService.js"],"sourcesContent":["// src/services/CartService.js\r\nimport axios from 'axios';\r\n\r\nconst BASE_URL = 'http://localhost:5000/api/carts';\r\n\r\nconst mapSize = (size) => {\r\n  switch (size) {\r\n    case \"25\": return \"0.25\";\r\n    case \"5\": return \"0.5\";\r\n    case \"1\": return \"1\";\r\n    case \"0.25\": return \"0.25\";\r\n    case \"0.5\": return \"0.5\";\r\n    case \"1.0\": return \"1\";\r\n    default: throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ \"25\" (0.25kg), \"5\" (0.5kg), \"1\" (1kg)`);\r\n  }\r\n};\r\n\r\nexport async function fetchCart(userId, token) {\r\n  try {\r\n    if (!userId) throw new Error('Thiếu userId');\r\n    if (!token) throw new Error('Thiếu token');\r\n    console.log('Fetching cart for userId:', userId);\r\n    const response = await axios.get(`${BASE_URL}/${userId}`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function addToCart(userId, product, token) {\r\n  try {\r\n    if (!userId) throw new Error('Thiếu userId');\r\n    if (!token) throw new Error('Thiếu token');\r\n    const { productId, quantity = 1, size, name, price, image } = product;\r\n    const mappedSize = mapSize(size);\r\n    console.log('Adding to cart:', { userId, productId, quantity, size: mappedSize, name, price, image });\r\n\r\n    const response = await axios.post(\r\n      `${BASE_URL}/add`,\r\n      { userId, productId, quantity, size: mappedSize, name, price, image },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error adding to cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function increaseQuantity(userId, productId, size, token) {\r\n  try {\r\n    if (!userId) throw new Error('Thiếu userId');\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Increasing quantity:', { userId, productId, size: mappedSize });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/increase`,\r\n      { userId, productId, size: mappedSize },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error increasing quantity:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function decreaseQuantity(userId, productId, size, token) {\r\n  try {\r\n    if (!userId) throw new Error('Thiếu userId');\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Decreasing quantity:', { userId, productId, size: mappedSize });\r\n\r\n    const response = await axios.put(\r\n      `${BASE_URL}/decrease`,\r\n      { userId, productId, size: mappedSize },\r\n      { headers: { Authorization: `Bearer ${token}` } }\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error decreasing quantity:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}\r\n\r\nexport async function removeFromCart(userId, productId, size, token) {\r\n  try {\r\n    if (!userId) throw new Error('Thiếu userId');\r\n    if (!token) throw new Error('Thiếu token');\r\n    const mappedSize = mapSize(size);\r\n    console.log('Removing from cart:', { userId, productId, size: mappedSize });\r\n\r\n    const response = await axios.delete(`${BASE_URL}/remove`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n      data: { userId, productId, size: mappedSize },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error removing from cart:', error.message);\r\n    throw error.response?.data || error;\r\n  }\r\n}"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,iCAAiC;AAElD,MAAMC,OAAO,GAAIC,IAAI,IAAK;EACxB,QAAQA,IAAI;IACV,KAAK,IAAI;MAAE,OAAO,MAAM;IACxB,KAAK,GAAG;MAAE,OAAO,KAAK;IACtB,KAAK,GAAG;MAAE,OAAO,GAAG;IACpB,KAAK,MAAM;MAAE,OAAO,MAAM;IAC1B,KAAK,KAAK;MAAE,OAAO,KAAK;IACxB,KAAK,KAAK;MAAE,OAAO,GAAG;IACtB;MAAS,MAAM,IAAIC,KAAK,CAAC,sBAAsBD,IAAI,oDAAoD,CAAC;EAC1G;AACF,CAAC;AAED,OAAO,eAAeE,SAASA,CAACC,MAAM,EAAEC,KAAK,EAAE;EAC7C,IAAI;IACF,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIF,KAAK,CAAC,cAAc,CAAC;IAC5C,IAAI,CAACG,KAAK,EAAE,MAAM,IAAIH,KAAK,CAAC,aAAa,CAAC;IAC1CI,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEH,MAAM,CAAC;IAChD,MAAMI,QAAQ,GAAG,MAAMV,KAAK,CAACW,GAAG,CAAC,GAAGV,QAAQ,IAAIK,MAAM,EAAE,EAAE;MACxDM,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUN,KAAK;MAAG;IAC9C,CAAC,CAAC;IACF,OAAOG,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAC,eAAA;IACdR,OAAO,CAACO,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAACE,OAAO,CAAC;IACpD,MAAM,EAAAD,eAAA,GAAAD,KAAK,CAACL,QAAQ,cAAAM,eAAA,uBAAdA,eAAA,CAAgBF,IAAI,KAAIC,KAAK;EACrC;AACF;AAEA,OAAO,eAAeG,SAASA,CAACZ,MAAM,EAAEa,OAAO,EAAEZ,KAAK,EAAE;EACtD,IAAI;IACF,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIF,KAAK,CAAC,cAAc,CAAC;IAC5C,IAAI,CAACG,KAAK,EAAE,MAAM,IAAIH,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAM;MAAEgB,SAAS;MAAEC,QAAQ,GAAG,CAAC;MAAElB,IAAI;MAAEmB,IAAI;MAAEC,KAAK;MAAEC;IAAM,CAAC,GAAGL,OAAO;IACrE,MAAMM,UAAU,GAAGvB,OAAO,CAACC,IAAI,CAAC;IAChCK,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE;MAAEH,MAAM;MAAEc,SAAS;MAAEC,QAAQ;MAAElB,IAAI,EAAEsB,UAAU;MAAEH,IAAI;MAAEC,KAAK;MAAEC;IAAM,CAAC,CAAC;IAErG,MAAMd,QAAQ,GAAG,MAAMV,KAAK,CAAC0B,IAAI,CAC/B,GAAGzB,QAAQ,MAAM,EACjB;MAAEK,MAAM;MAAEc,SAAS;MAAEC,QAAQ;MAAElB,IAAI,EAAEsB,UAAU;MAAEH,IAAI;MAAEC,KAAK;MAAEC;IAAM,CAAC,EACrE;MAAEZ,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUN,KAAK;MAAG;IAAE,CAClD,CAAC;IACD,OAAOG,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAY,gBAAA;IACdnB,OAAO,CAACO,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACE,OAAO,CAAC;IACrD,MAAM,EAAAU,gBAAA,GAAAZ,KAAK,CAACL,QAAQ,cAAAiB,gBAAA,uBAAdA,gBAAA,CAAgBb,IAAI,KAAIC,KAAK;EACrC;AACF;AAEA,OAAO,eAAea,gBAAgBA,CAACtB,MAAM,EAAEc,SAAS,EAAEjB,IAAI,EAAEI,KAAK,EAAE;EACrE,IAAI;IACF,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIF,KAAK,CAAC,cAAc,CAAC;IAC5C,IAAI,CAACG,KAAK,EAAE,MAAM,IAAIH,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAMqB,UAAU,GAAGvB,OAAO,CAACC,IAAI,CAAC;IAChCK,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE;MAAEH,MAAM;MAAEc,SAAS;MAAEjB,IAAI,EAAEsB;IAAW,CAAC,CAAC;IAE5E,MAAMf,QAAQ,GAAG,MAAMV,KAAK,CAAC6B,GAAG,CAC9B,GAAG5B,QAAQ,WAAW,EACtB;MAAEK,MAAM;MAAEc,SAAS;MAAEjB,IAAI,EAAEsB;IAAW,CAAC,EACvC;MAAEb,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUN,KAAK;MAAG;IAAE,CAClD,CAAC;IACD,OAAOG,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAe,gBAAA;IACdtB,OAAO,CAACO,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAACE,OAAO,CAAC;IAC1D,MAAM,EAAAa,gBAAA,GAAAf,KAAK,CAACL,QAAQ,cAAAoB,gBAAA,uBAAdA,gBAAA,CAAgBhB,IAAI,KAAIC,KAAK;EACrC;AACF;AAEA,OAAO,eAAegB,gBAAgBA,CAACzB,MAAM,EAAEc,SAAS,EAAEjB,IAAI,EAAEI,KAAK,EAAE;EACrE,IAAI;IACF,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIF,KAAK,CAAC,cAAc,CAAC;IAC5C,IAAI,CAACG,KAAK,EAAE,MAAM,IAAIH,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAMqB,UAAU,GAAGvB,OAAO,CAACC,IAAI,CAAC;IAChCK,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE;MAAEH,MAAM;MAAEc,SAAS;MAAEjB,IAAI,EAAEsB;IAAW,CAAC,CAAC;IAE5E,MAAMf,QAAQ,GAAG,MAAMV,KAAK,CAAC6B,GAAG,CAC9B,GAAG5B,QAAQ,WAAW,EACtB;MAAEK,MAAM;MAAEc,SAAS;MAAEjB,IAAI,EAAEsB;IAAW,CAAC,EACvC;MAAEb,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUN,KAAK;MAAG;IAAE,CAClD,CAAC;IACD,OAAOG,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAiB,gBAAA;IACdxB,OAAO,CAACO,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAACE,OAAO,CAAC;IAC1D,MAAM,EAAAe,gBAAA,GAAAjB,KAAK,CAACL,QAAQ,cAAAsB,gBAAA,uBAAdA,gBAAA,CAAgBlB,IAAI,KAAIC,KAAK;EACrC;AACF;AAEA,OAAO,eAAekB,cAAcA,CAAC3B,MAAM,EAAEc,SAAS,EAAEjB,IAAI,EAAEI,KAAK,EAAE;EACnE,IAAI;IACF,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIF,KAAK,CAAC,cAAc,CAAC;IAC5C,IAAI,CAACG,KAAK,EAAE,MAAM,IAAIH,KAAK,CAAC,aAAa,CAAC;IAC1C,MAAMqB,UAAU,GAAGvB,OAAO,CAACC,IAAI,CAAC;IAChCK,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE;MAAEH,MAAM;MAAEc,SAAS;MAAEjB,IAAI,EAAEsB;IAAW,CAAC,CAAC;IAE3E,MAAMf,QAAQ,GAAG,MAAMV,KAAK,CAACkC,MAAM,CAAC,GAAGjC,QAAQ,SAAS,EAAE;MACxDW,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUN,KAAK;MAAG,CAAC;MAC7CO,IAAI,EAAE;QAAER,MAAM;QAAEc,SAAS;QAAEjB,IAAI,EAAEsB;MAAW;IAC9C,CAAC,CAAC;IACF,OAAOf,QAAQ,CAACI,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAoB,gBAAA;IACd3B,OAAO,CAACO,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAACE,OAAO,CAAC;IACzD,MAAM,EAAAkB,gBAAA,GAAApB,KAAK,CAACL,QAAQ,cAAAyB,gBAAA,uBAAdA,gBAAA,CAAgBrB,IAAI,KAAIC,KAAK;EACrC;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}