{"ast":null,"code":"import React,{createContext,useState,useContext,useEffect,useCallback}from'react';import{useAuth}from'./AuthContext';import{fetchCart,addToCart,removeFromCart,increaseQuantity,decreaseQuantity}from'../services/CartService';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const CartProvider=_ref=>{let{children}=_ref;const[cartItems,setCartItems]=useState([]);const[isOpen,setIsOpen]=useState(false);const{user}=useAuth();const loadCartFromServer=useCallback(async()=>{if(user&&user._id){try{const cart=await fetchCart(user._id);console.log('Cart from server:',cart);const itemsWithSelection=cart.items.map(item=>({...item,selected:item.selected||false}));setCartItems(itemsWithSelection);}catch(error){setCartItems([]);}}},[user]);const loadCartFromLocalStorage=useCallback(()=>{try{const savedCart=localStorage.getItem('cartItems');setCartItems(savedCart?JSON.parse(savedCart):[]);}catch(error){console.error(\"Lỗi khi lấy giỏ hàng từ localStorage:\",error);setCartItems([]);}},[]);useEffect(()=>{if(user&&user._id){loadCartFromServer();}else{console.warn('Không có user._id, sử dụng localStorage:',user);loadCartFromLocalStorage();}},[user,loadCartFromServer,loadCartFromLocalStorage]);useEffect(()=>{if(!user||!user._id){localStorage.setItem('cartItems',JSON.stringify(cartItems));}},[cartItems,user]);const toggleCart=()=>setIsOpen(prev=>!prev);const handleAddToCart=async product=>{const{productId,quantity=1,size,name,price,image}=product;if(user&&user._id){try{await addToCart(user._id,{productId,quantity,size,name,price,image});await loadCartFromServer();}catch(error){// Lỗi đã được log trong CartService\n}}else{setCartItems(prev=>{const existingItem=prev.find(item=>item.productId===productId&&item.size===size);if(existingItem){return prev.map(item=>item.productId===productId&&item.size===size?{...item,quantity:item.quantity+quantity}:item);}return[...prev,{productId,quantity,size,name,price,image,selected:false}];});}};const handleRemoveFromCart=async(productId,size)=>{if(user&&user._id){try{await removeFromCart(user._id,productId,size);await loadCartFromServer();}catch(error){// Lỗi đã được log trong CartService\n}}else{setCartItems(prev=>prev.filter(item=>!(item.productId===productId&&item.size===size)));}};const handleIncreaseQuantity=async(productId,size)=>{if(user&&user._id){try{await increaseQuantity(user._id,productId,size);await loadCartFromServer();}catch(error){// Lỗi đã được log trong CartService\n}}else{setCartItems(prev=>prev.map(item=>item.productId===productId&&item.size===size?{...item,quantity:item.quantity+1}:item));}};const handleDecreaseQuantity=async(productId,size)=>{if(user&&user._id){try{await decreaseQuantity(user._id,productId,size);await loadCartFromServer();}catch(error){// Lỗi đã được log trong CartService\n}}else{setCartItems(prev=>prev.map(item=>item.productId===productId&&item.size===size&&item.quantity>1?{...item,quantity:item.quantity-1}:item).filter(item=>item.quantity>0));}};const handleSelectAll=isSelected=>{setCartItems(prev=>prev.map(item=>({...item,selected:isSelected})));if(!user||!user._id){localStorage.setItem('cartItems',JSON.stringify(cartItems.map(item=>({...item,selected:isSelected}))));}};const handleToggleItemSelection=(productId,size)=>{setCartItems(prev=>prev.map(item=>item.productId===productId&&item.size===size?{...item,selected:!item.selected}:item));if(!user||!user._id){localStorage.setItem('cartItems',JSON.stringify(cartItems.map(item=>item.productId===productId&&item.size===size?{...item,selected:!item.selected}:item)));}};// Thêm hàm clearCart để xóa giỏ hàng\nconst clearCart=async()=>{if(user&&user._id){try{await axios.delete(\"http://localhost:5000/api/carts\",{data:{userId:user._id}});await loadCartFromServer();}catch(error){console.error(\"Lỗi khi xóa giỏ hàng trên server:\",error);}}else{setCartItems([]);localStorage.setItem('cartItems',JSON.stringify([]));}};const total=cartItems.filter(item=>item.selected).reduce((sum,item)=>sum+item.price*item.quantity,0);const totalItems=cartItems.reduce((sum,item)=>sum+item.quantity,0);const displaySize=size=>{switch(size){case\"0.25\":return\"0.25kg\";case\"0.5\":return\"0.5kg\";case\"1\":return\"1kg\";default:return size;}};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartItems,setCartItems,isOpen,toggleCart,total,totalItems,addToCart:handleAddToCart,removeFromCart:handleRemoveFromCart,increaseQuantity:handleIncreaseQuantity,decreaseQuantity:handleDecreaseQuantity,selectAll:handleSelectAll,toggleItemSelection:handleToggleItemSelection,fetchCartFromServer:loadCartFromServer,loadCartFromLocalStorage,clearCart,// Thêm clearCart vào context\ndisplaySize},children:children});};export const useCart=()=>{const context=useContext(CartContext);if(!context){throw new Error(\"useCart must be used within a CartProvider\");}return context;};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","useCallback","useAuth","fetchCart","addToCart","removeFromCart","increaseQuantity","decreaseQuantity","jsx","_jsx","CartContext","CartProvider","_ref","children","cartItems","setCartItems","isOpen","setIsOpen","user","loadCartFromServer","_id","cart","console","log","itemsWithSelection","items","map","item","selected","error","loadCartFromLocalStorage","savedCart","localStorage","getItem","JSON","parse","warn","setItem","stringify","toggleCart","prev","handleAddToCart","product","productId","quantity","size","name","price","image","existingItem","find","handleRemoveFromCart","filter","handleIncreaseQuantity","handleDecreaseQuantity","handleSelectAll","isSelected","handleToggleItemSelection","clearCart","axios","delete","data","userId","total","reduce","sum","totalItems","displaySize","Provider","value","selectAll","toggleItemSelection","fetchCartFromServer","useCart","context","Error"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport { fetchCart, addToCart, removeFromCart, increaseQuantity, decreaseQuantity } from '../services/CartService';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  const loadCartFromServer = useCallback(async () => {\r\n    if (user && user._id) {\r\n      try {\r\n        const cart = await fetchCart(user._id);\r\n        console.log('Cart from server:', cart);\r\n        const itemsWithSelection = cart.items.map(item => ({\r\n          ...item,\r\n          selected: item.selected || false,\r\n        }));\r\n        setCartItems(itemsWithSelection);\r\n      } catch (error) {\r\n        setCartItems([]);\r\n      }\r\n    }\r\n  }, [user]);\r\n\r\n  const loadCartFromLocalStorage = useCallback(() => {\r\n    try {\r\n      const savedCart = localStorage.getItem('cartItems');\r\n      setCartItems(savedCart ? JSON.parse(savedCart) : []);\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi lấy giỏ hàng từ localStorage:\", error);\r\n      setCartItems([]);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user && user._id) {\r\n      loadCartFromServer();\r\n    } else {\r\n      console.warn('Không có user._id, sử dụng localStorage:', user);\r\n      loadCartFromLocalStorage();\r\n    }\r\n  }, [user, loadCartFromServer, loadCartFromLocalStorage]);\r\n\r\n  useEffect(() => {\r\n    if (!user || !user._id) {\r\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\r\n    }\r\n  }, [cartItems, user]);\r\n\r\n  const toggleCart = () => setIsOpen(prev => !prev);\r\n\r\n  const handleAddToCart = async (product) => {\r\n    const { productId, quantity = 1, size, name, price, image } = product;\r\n\r\n    if (user && user._id) {\r\n      try {\r\n        await addToCart(user._id, { productId, quantity, size, name, price, image });\r\n        await loadCartFromServer();\r\n      } catch (error) {\r\n        // Lỗi đã được log trong CartService\r\n      }\r\n    } else {\r\n      setCartItems(prev => {\r\n        const existingItem = prev.find(item => item.productId === productId && item.size === size);\r\n        if (existingItem) {\r\n          return prev.map(item =>\r\n            item.productId === productId && item.size === size\r\n              ? { ...item, quantity: item.quantity + quantity }\r\n              : item\r\n          );\r\n        }\r\n        return [...prev, { productId, quantity, size, name, price, image, selected: false }];\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRemoveFromCart = async (productId, size) => {\r\n    if (user && user._id) {\r\n      try {\r\n        await removeFromCart(user._id, productId, size);\r\n        await loadCartFromServer();\r\n      } catch (error) {\r\n        // Lỗi đã được log trong CartService\r\n      }\r\n    } else {\r\n      setCartItems(prev =>\r\n        prev.filter(item => !(item.productId === productId && item.size === size))\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleIncreaseQuantity = async (productId, size) => {\r\n    if (user && user._id) {\r\n      try {\r\n        await increaseQuantity(user._id, productId, size);\r\n        await loadCartFromServer();\r\n      } catch (error) {\r\n        // Lỗi đã được log trong CartService\r\n      }\r\n    } else {\r\n      setCartItems(prev =>\r\n        prev.map(item =>\r\n          item.productId === productId && item.size === size\r\n            ? { ...item, quantity: item.quantity + 1 }\r\n            : item\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleDecreaseQuantity = async (productId, size) => {\r\n    if (user && user._id) {\r\n      try {\r\n        await decreaseQuantity(user._id, productId, size);\r\n        await loadCartFromServer();\r\n      } catch (error) {\r\n        // Lỗi đã được log trong CartService\r\n      }\r\n    } else {\r\n      setCartItems(prev =>\r\n        prev.map(item =>\r\n          item.productId === productId && item.size === size && item.quantity > 1\r\n            ? { ...item, quantity: item.quantity - 1 }\r\n            : item\r\n        ).filter(item => item.quantity > 0)\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleSelectAll = (isSelected) => {\r\n    setCartItems(prev =>\r\n      prev.map(item => ({\r\n        ...item,\r\n        selected: isSelected,\r\n      }))\r\n    );\r\n    if (!user || !user._id) {\r\n      localStorage.setItem('cartItems', JSON.stringify(cartItems.map(item => ({\r\n        ...item,\r\n        selected: isSelected,\r\n      }))));\r\n    }\r\n  };\r\n\r\n  const handleToggleItemSelection = (productId, size) => {\r\n    setCartItems(prev =>\r\n      prev.map(item =>\r\n        item.productId === productId && item.size === size\r\n          ? { ...item, selected: !item.selected }\r\n          : item\r\n      )\r\n    );\r\n    if (!user || !user._id) {\r\n      localStorage.setItem('cartItems', JSON.stringify(cartItems.map(item =>\r\n        item.productId === productId && item.size === size\r\n          ? { ...item, selected: !item.selected }\r\n          : item\r\n      )));\r\n    }\r\n  };\r\n\r\n  // Thêm hàm clearCart để xóa giỏ hàng\r\n  const clearCart = async () => {\r\n    if (user && user._id) {\r\n      try {\r\n        await axios.delete(\"http://localhost:5000/api/carts\", {\r\n          data: { userId: user._id },\r\n        });\r\n        await loadCartFromServer();\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi xóa giỏ hàng trên server:\", error);\r\n      }\r\n    } else {\r\n      setCartItems([]);\r\n      localStorage.setItem('cartItems', JSON.stringify([]));\r\n    }\r\n  };\r\n\r\n  const total = cartItems\r\n    .filter(item => item.selected)\r\n    .reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n\r\n  const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n  const displaySize = (size) => {\r\n    switch (size) {\r\n      case \"0.25\": return \"0.25kg\";\r\n      case \"0.5\": return \"0.5kg\";\r\n      case \"1\": return \"1kg\";\r\n      default: return size;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        cartItems,\r\n        setCartItems,\r\n        isOpen,\r\n        toggleCart,\r\n        total,\r\n        totalItems,\r\n        addToCart: handleAddToCart,\r\n        removeFromCart: handleRemoveFromCart,\r\n        increaseQuantity: handleIncreaseQuantity,\r\n        decreaseQuantity: handleDecreaseQuantity,\r\n        selectAll: handleSelectAll,\r\n        toggleItemSelection: handleToggleItemSelection,\r\n        fetchCartFromServer: loadCartFromServer,\r\n        loadCartFromLocalStorage,\r\n        clearCart, // Thêm clearCart vào context\r\n        displaySize,\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error(\"useCart must be used within a CartProvider\");\r\n  }\r\n  return context;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}