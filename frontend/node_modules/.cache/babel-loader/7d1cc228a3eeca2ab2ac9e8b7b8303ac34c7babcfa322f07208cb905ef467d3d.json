{"ast":null,"code":"// src/services/CartService.js\n\nconst BASE_URL = 'http://localhost:5000/api/carts';\n\n// Lấy giỏ hàng theo userId\nexport async function fetchCart(userId) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    console.log('Fetching cart for userId:', userId);\n    const response = await fetch(`${BASE_URL}/${userId}`);\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Lỗi khi lấy giỏ hàng');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error fetching cart:', error.message);\n    throw error;\n  }\n}\n\n// Thêm sản phẩm vào giỏ hàng (hỗ trợ 0.25kg, 0.5kg, 1kg)\nexport async function addToCart(userId, product) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    const {\n      productId,\n      quantity = 1,\n      size,\n      name,\n      price,\n      image\n    } = product;\n\n    // Kiểm tra size hợp lệ\n    const validSizes = [\"0.25\", \"0.5\", \"1\"];\n    if (!validSizes.includes(size)) {\n      throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\n    }\n    console.log('Adding to cart:', {\n      userId,\n      productId,\n      quantity,\n      size,\n      name,\n      price,\n      image\n    });\n    const response = await fetch(`${BASE_URL}/add`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId,\n        productId,\n        quantity,\n        size,\n        name,\n        price,\n        image\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Lỗi khi thêm vào giỏ hàng');\n    }\n    const data = await response.json();\n    console.log('Cart updated:', data);\n    return data;\n  } catch (error) {\n    console.error('Error adding to cart:', error.message);\n    throw error;\n  }\n}\n\n// Tăng số lượng sản phẩm\nexport async function increaseQuantity(userId, productId, size) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    const validSizes = [\"0.25\", \"0.5\", \"1\"];\n    if (!validSizes.includes(size)) {\n      throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\n    }\n    console.log('Increasing quantity:', {\n      userId,\n      productId,\n      size\n    });\n    const response = await fetch(`${BASE_URL}/increase`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId,\n        productId,\n        size\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Lỗi khi tăng số lượng');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error increasing quantity:', error.message);\n    throw error;\n  }\n}\n\n// Giảm số lượng sản phẩm\nexport async function decreaseQuantity(userId, productId, size) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    const validSizes = [\"0.25\", \"0.5\", \"1\"];\n    if (!validSizes.includes(size)) {\n      throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\n    }\n    console.log('Decreasing quantity:', {\n      userId,\n      productId,\n      size\n    });\n    const response = await fetch(`${BASE_URL}/decrease`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId,\n        productId,\n        size\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Lỗi khi giảm số lượng');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error decreasing quantity:', error.message);\n    throw error;\n  }\n}\n\n// Xóa sản phẩm khỏi giỏ hàng\nexport async function removeFromCart(userId, productId, size) {\n  try {\n    if (!userId) throw new Error('Thiếu userId');\n    const validSizes = [\"0.25\", \"0.5\", \"1\"];\n    if (!validSizes.includes(size)) {\n      throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\n    }\n    console.log('Removing from cart:', {\n      userId,\n      productId,\n      size\n    });\n    const response = await fetch(`${BASE_URL}/remove`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId,\n        productId,\n        size\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.message || 'Lỗi khi xóa sản phẩm');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('Error removing from cart:', error.message);\n    throw error;\n  }\n}","map":{"version":3,"names":["BASE_URL","fetchCart","userId","Error","console","log","response","fetch","ok","errorData","json","message","data","error","addToCart","product","productId","quantity","size","name","price","image","validSizes","includes","method","headers","body","JSON","stringify","increaseQuantity","decreaseQuantity","removeFromCart"],"sources":["D:/Năm 4 Kì 2/Phát triển hệ thống thương mại điện tử/ecommerce-app/frontend/src/services/CartService.js"],"sourcesContent":["// src/services/CartService.js\r\n\r\nconst BASE_URL = 'http://localhost:5000/api/carts';\r\n\r\n// Lấy giỏ hàng theo userId\r\nexport async function fetchCart(userId) {\r\n    try {\r\n        if (!userId) throw new Error('Thiếu userId');\r\n        console.log('Fetching cart for userId:', userId);\r\n        const response = await fetch(`${BASE_URL}/${userId}`);\r\n        if (!response.ok) {\r\n            const errorData = await response.json();\r\n            throw new Error(errorData.message || 'Lỗi khi lấy giỏ hàng');\r\n        }\r\n        const data = await response.json();\r\n        return data;\r\n    } catch (error) {\r\n        console.error('Error fetching cart:', error.message);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// Thêm sản phẩm vào giỏ hàng (hỗ trợ 0.25kg, 0.5kg, 1kg)\r\nexport async function addToCart(userId, product) {\r\n    try {\r\n        if (!userId) throw new Error('Thiếu userId');\r\n        const { productId, quantity = 1, size, name, price, image } = product;\r\n\r\n        // Kiểm tra size hợp lệ\r\n        const validSizes = [\"0.25\", \"0.5\", \"1\"];\r\n        if (!validSizes.includes(size)) {\r\n            throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\r\n        }\r\n\r\n        console.log('Adding to cart:', { userId, productId, quantity, size, name, price, image });\r\n        const response = await fetch(`${BASE_URL}/add`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ userId, productId, quantity, size, name, price, image })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json();\r\n            throw new Error(errorData.message || 'Lỗi khi thêm vào giỏ hàng');\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log('Cart updated:', data);\r\n        return data;\r\n    } catch (error) {\r\n        console.error('Error adding to cart:', error.message);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// Tăng số lượng sản phẩm\r\nexport async function increaseQuantity(userId, productId, size) {\r\n    try {\r\n        if (!userId) throw new Error('Thiếu userId');\r\n        const validSizes = [\"0.25\", \"0.5\", \"1\"];\r\n        if (!validSizes.includes(size)) {\r\n            throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\r\n        }\r\n\r\n        console.log('Increasing quantity:', { userId, productId, size });\r\n        const response = await fetch(`${BASE_URL}/increase`, {\r\n            method: 'PUT',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ userId, productId, size })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json();\r\n            throw new Error(errorData.message || 'Lỗi khi tăng số lượng');\r\n        }\r\n\r\n        return await response.json();\r\n    } catch (error) {\r\n        console.error('Error increasing quantity:', error.message);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// Giảm số lượng sản phẩm\r\nexport async function decreaseQuantity(userId, productId, size) {\r\n    try {\r\n        if (!userId) throw new Error('Thiếu userId');\r\n        const validSizes = [\"0.25\", \"0.5\", \"1\"];\r\n        if (!validSizes.includes(size)) {\r\n            throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\r\n        }\r\n\r\n        console.log('Decreasing quantity:', { userId, productId, size });\r\n        const response = await fetch(`${BASE_URL}/decrease`, {\r\n            method: 'PUT',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ userId, productId, size })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json();\r\n            throw new Error(errorData.message || 'Lỗi khi giảm số lượng');\r\n        }\r\n\r\n        return await response.json();\r\n    } catch (error) {\r\n        console.error('Error decreasing quantity:', error.message);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// Xóa sản phẩm khỏi giỏ hàng\r\nexport async function removeFromCart(userId, productId, size) {\r\n    try {\r\n        if (!userId) throw new Error('Thiếu userId');\r\n        const validSizes = [\"0.25\", \"0.5\", \"1\"];\r\n        if (!validSizes.includes(size)) {\r\n            throw new Error(`Size không hợp lệ: ${size}. Chỉ hỗ trợ 0.25, 0.5, hoặc 1`);\r\n        }\r\n\r\n        console.log('Removing from cart:', { userId, productId, size });\r\n        const response = await fetch(`${BASE_URL}/remove`, {\r\n            method: 'DELETE',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ userId, productId, size })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json();\r\n            throw new Error(errorData.message || 'Lỗi khi xóa sản phẩm');\r\n        }\r\n\r\n        return await response.json();\r\n    } catch (error) {\r\n        console.error('Error removing from cart:', error.message);\r\n        throw error;\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}