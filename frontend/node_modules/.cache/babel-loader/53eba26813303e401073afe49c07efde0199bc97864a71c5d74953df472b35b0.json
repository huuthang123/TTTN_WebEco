{"ast":null,"code":"import React,{useEffect}from'react';import'../styles/cartsidebar.css';import{useCart}from'../context/CartContext';import{useAuth}from'../context/AuthContext';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CartSidebar(){const{cartItems,removeFromCart,isOpen,toggleCart,total,totalItems,increaseQuantity,decreaseQuantity,fetchCartFromServer,loadCartFromLocalStorage}=useCart();const{user}=useAuth();const navigate=useNavigate();useEffect(()=>{if(user&&user._id){fetchCartFromServer(user._id);}else{loadCartFromLocalStorage();}},[user,fetchCartFromServer,loadCartFromLocalStorage]);const handleViewCart=()=>{navigate('/cart');// Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang /cart\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-toggle-btn\",onClick:toggleCart,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-count-badge\",children:totalItems})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"cart-sidebar\",className:isOpen?'open':'closed',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gi\\u1ECF h\\xE0ng \\uD83D\\uDED2\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:toggleCart,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-actions\",children:/*#__PURE__*/_jsxs(\"p\",{id:\"cart-count\",children:[\"T\\u1ED5ng s\\u1ED1 l\\u01B0\\u1EE3ng: \",totalItems]})}),/*#__PURE__*/_jsx(\"ul\",{id:\"cart-items\",children:cartItems.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"cart-item-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-details\",children:[/*#__PURE__*/_jsx(\"span\",{children:typeof item.name==='string'&&typeof item.size==='string'?`${item.name} (${item.size}kg)`:\"T√™n s·∫£n ph·∫©m kh√¥ng h·ª£p l·ªá\"}),/*#__PURE__*/_jsx(\"span\",{children:typeof item.price==='number'?`${item.price.toLocaleString()} VND`:\"Ch∆∞a c√≥ gi√°\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>decreaseQuantity(item.productId,item.size),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:typeof item.quantity==='number'?item.quantity:1}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>increaseQuantity(item.productId,item.size),children:\"+\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.productId,item.size),children:\"X\\xF3a\"})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-footer\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"T\\u1ED5ng ti\\u1EC1n:\",/*#__PURE__*/_jsx(\"span\",{id:\"cart-total\",children:typeof total==='number'?`${total.toLocaleString()} VND`:\"Kh√¥ng x√°c ƒë·ªãnh\"})]}),/*#__PURE__*/_jsx(\"button\",{id:\"view-cart-btn\",onClick:handleViewCart,children:\"Xem gi\\u1ECF h\\xE0ng\"})]})]})]});}export default CartSidebar;","map":{"version":3,"names":["React","useEffect","useCart","useAuth","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CartSidebar","cartItems","removeFromCart","isOpen","toggleCart","total","totalItems","increaseQuantity","decreaseQuantity","fetchCartFromServer","loadCartFromLocalStorage","user","navigate","_id","handleViewCart","children","className","onClick","id","map","item","index","src","image","alt","name","size","price","toLocaleString","productId","quantity"],"sources":["D:/NƒÉm 4 K√¨ 2/Ph√°t tri·ªÉn h·ªá th·ªëng th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠/ecommerce-app/frontend/src/components/CartSidebar.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport '../styles/cartsidebar.css';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction CartSidebar() {\r\n    const {\r\n        cartItems,\r\n        removeFromCart,\r\n        isOpen,\r\n        toggleCart,\r\n        total,\r\n        totalItems,\r\n        increaseQuantity,\r\n        decreaseQuantity,\r\n        fetchCartFromServer,\r\n        loadCartFromLocalStorage\r\n    } = useCart();\r\n\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (user && user._id) {\r\n            fetchCartFromServer(user._id);\r\n        } else {\r\n            loadCartFromLocalStorage();\r\n        }\r\n    }, [user, fetchCartFromServer, loadCartFromLocalStorage]);\r\n\r\n    const handleViewCart = () => {\r\n        navigate('/cart'); // Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang /cart\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"cart-toggle-btn\" onClick={toggleCart}>\r\n                <i className=\"fas fa-shopping-cart\"></i>\r\n                <span className=\"cart-count-badge\">{totalItems}</span>\r\n            </div>\r\n\r\n            <div id=\"cart-sidebar\" className={isOpen ? 'open' : 'closed'}>\r\n                <div className=\"cart-header\">\r\n                    <h2>Gi·ªè h√†ng üõí</h2>\r\n                    <button className=\"close-btn\" onClick={toggleCart}>\r\n                        <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                </div>\r\n                <div className=\"cart-actions\">\r\n                    <p id=\"cart-count\">T·ªïng s·ªë l∆∞·ª£ng: {totalItems}</p>\r\n                </div>\r\n                <ul id=\"cart-items\">\r\n                    {cartItems.map((item, index) => (\r\n                        <li key={index} className=\"cart-item\">\r\n                            <img src={item.image} alt={item.name} className=\"cart-item-image\" />\r\n                            <div className=\"cart-item-details\">\r\n                                <span>\r\n                                    {typeof item.name === 'string' && typeof item.size === 'string' \r\n                                        ? `${item.name} (${item.size}kg)`\r\n                                        : \"T√™n s·∫£n ph·∫©m kh√¥ng h·ª£p l·ªá\"}\r\n                                </span>\r\n                                <span>\r\n                                    {typeof item.price === 'number' \r\n                                        ? `${item.price.toLocaleString()} VND` \r\n                                        : \"Ch∆∞a c√≥ gi√°\"}\r\n                                </span>\r\n                                <div className=\"quantity-controls\">\r\n                                    <button onClick={() => decreaseQuantity(item.productId, item.size)}>-</button>\r\n                                    <span>{typeof item.quantity === 'number' ? item.quantity : 1}</span>\r\n                                    <button onClick={() => increaseQuantity(item.productId, item.size)}>+</button>\r\n                                </div>\r\n                            </div>\r\n                            <button onClick={() => removeFromCart(item.productId, item.size)}>X√≥a</button>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n                <div className=\"cart-footer\">\r\n                    <p>\r\n                        T·ªïng ti·ªÅn: \r\n                        <span id=\"cart-total\">\r\n                            {typeof total === 'number' ? `${total.toLocaleString()} VND` : \"Kh√¥ng x√°c ƒë·ªãnh\"}\r\n                        </span>\r\n                    </p>\r\n                    <button id=\"view-cart-btn\" onClick={handleViewCart}>\r\n                        Xem gi·ªè h√†ng\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default CartSidebar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}